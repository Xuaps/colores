<!DOCTYPE html>
<html>
<head>
  <title>Colores</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <style type="text/css">
    html,body {
      background-color: #333;
      color: #fff;
      font-family: helvetica, arial, sans-serif;
      margin: 0;
      padding: 0;
      font-size: 12pt;
    }

    #canvas {
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
    }
  </style>

  <script type="text/javascript" src="js/game.min.js"></script>
</head>
<body>
  <canvas id="canvas"></canvas>
  <script>
	// Handler for when app goes to background
	function onAppPause() {
		// Pause background music
		if (ig.music && ig.music.currentTrack) {
			ig.system.pausedMusic = true;
			ig.music.pause();
		}
		
		// Pause any active narration
		if (ig.game && ig.game.narration) {
			ig.system.pausedNarration = true;
			ig.game.narration.stop();
		}
	}

	// Handler for when app returns to foreground
	function onAppResume() {
		// Wait a moment before resuming audio (to ensure app is fully active)
		setTimeout(function() {
			// Resume background music if it was playing before
			if (ig.music && ig.system.pausedMusic && ig.settings.music) {
				ig.music.play();
				ig.system.pausedMusic = false;
			}
			
			// Resume narration if it was playing before (we can't resume from where it left off,
			// so we simply set a flag to indicate it was interrupted)
			if (ig.game && ig.system.pausedNarration) {
				ig.system.pausedNarration = false;
				// We can't directly resume narration as it would start from the beginning
				// Instead, mark it as interrupted so the game knows it was playing
				ig.system.narrationInterrupted = true;
			}
		}, 300);
	}

	// Handler for browser tab visibility changes
	function onVisibilityChange() {
		if (document.hidden) {
			// Page is hidden (user switched tabs or minimized browser)
			onAppPause();
		} else {
			// Page is visible again
			onAppResume();
		}
	}

  var content = document.getElementById('canvas');
  content.addEventListener('touchstart', function(event) {
      this.allowUp = (this.scrollTop > 0);
      this.allowDown = (this.scrollTop < this.scrollHeight - this.clientHeight);
      this.slideBeginY = event.pageY;
  });

  content.addEventListener('touchmove', function(event) {
      var up = (event.pageY > this.slideBeginY);
      var down = (event.pageY < this.slideBeginY);
      this.slideBeginY = event.pageY;
      if ((up && this.allowUp) || (down && this.allowDown)) {
          event.stopPropagation();
      }
      else {
          event.preventDefault();
      }
  });

  document.addEventListener("pause", onAppPause, false);
  document.addEventListener("resume", onAppResume, false);
  document.addEventListener('visibilitychange', onVisibilityChange, false);
  </script>
</body>
</html>
