/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Object.defineProperty(Array.prototype,'erase',{value:function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;}});Object.defineProperty(Array.prototype,'random',{value:function(item){return this[Math.floor(Math.random()*this.length)];}});Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.24',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate,element);callback();};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// lib/impact/image.js
ig.baked=true;ig.module('impact.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/font.js
ig.baked=true;ig.module('impact.font').requires('impact.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(ev){this._loadMetrics(this.data);this.parent(ev);},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar]+this.letterSpacing;}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=(this.height-2)*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),charWidth,charHeight);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.height=image.height-1;this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentChar=0;var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]<128&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentChar++;currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/sound.js
ig.baked=true;ig.module('impact.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}
if(ig.Sound.enabled&&ig.Sound.useWebAudio){this.audioContext=new AudioContext();this.boundWebAudioUnlock=this.unlockWebAudio.bind(this);document.addEventListener('touchstart',this.boundWebAudioUnlock,false);}},unlockWebAudio:function(){document.removeEventListener('touchstart',this.boundWebAudioUnlock,false);var buffer=this.audioContext.createBuffer(1,1,22050);var source=this.audioContext.createBufferSource();source.buffer=buffer;source.connect(this.audioContext.destination);source.start(0);},load:function(path,multiChannel,loadCallback){if(multiChannel&&ig.Sound.useWebAudio){return this.loadWebAudio(path,multiChannel,loadCallback);}
else{return this.loadHTML5Audio(path,multiChannel,loadCallback);}},loadWebAudio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){return this.clips[path];}
var audioSource=new ig.Sound.WebAudioSource()
this.clips[path]=audioSource;var request=new XMLHttpRequest();request.open('GET',realPath,true);request.responseType='arraybuffer';var that=this;request.onload=function(ev){that.audioContext.decodeAudioData(request.response,function(buffer){audioSource.buffer=buffer;loadCallback(path,true,ev);},function(ev){loadCallback(path,false,ev);});};request.onerror=function(ev){loadCallback(path,false,ev);};request.send();return audioSource;},loadHTML5Audio:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(this.clips[path]instanceof ig.Sound.WebAudioSource){return this.clips[path];}
if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){if(ig.ua.mobile){setTimeout(function(){loadCallback(path,true,null);},0);}
else{clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];if(channels&&channels instanceof ig.Sound.WebAudioSource){return channels;}
for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);if(track instanceof ig.Sound.WebAudioSource){ig.system.stopRunLoop();throw("Sound '"+path+"' loaded as Multichannel but used for Music. "+"Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)");}
track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this.fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,_loop:false,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load();},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;if(this.currentClip){this.currentClip.loop=loop;}},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.loop=this._loop;this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:false,init:function(){this.gain=ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});},play:function(){if(!this.buffer){return;}
var source=ig.soundManager.audioContext.createBufferSource();source.buffer=this.buffer;source.connect(this.gain);source.loop=this._loop;var that=this;this.sources.push(source);source.onended=function(){that.sources.erase(source);}
source.start(0);},pause:function(){for(var i=0;i<this.sources.length;i++){try{this.sources[i].stop();}catch(err){}}},getLooping:function(){return this._loop;},setLooping:function(loop){this._loop=loop;for(var i=0;i<this.sources.length;i++){this.sources[i].loop=loop;}},getVolume:function(){return this.gain.gain.value;},setVolume:function(volume){this.gain.gain.value=volume;}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=true;ig.normalizeVendorAttribute(window,'AudioContext');ig.Sound.useWebAudio=!!window.AudioContext&&!window.nwf;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.image','impact.font','impact.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear('#000');if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=ig.system.width*0.6;var h=ig.system.height*0.1;var x=ig.system.width*0.5-w/2;var y=ig.system.height*0.5-h/2;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}}});});

// lib/impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer','impact.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);if(ig.ua.touchDevice){ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('MSPointerDown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('MSPointerUp',this.keyup.bind(this),false);ig.system.canvas.addEventListener('MSPointerMove',this.mousemove.bind(this),false);ig.system.canvas.style.msTouchAction='none';}},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
this.isUsingAccelerometer=true;window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(code<0&&!ig.ua.mobile){window.focus();}
if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);element.addEventListener('MSPointerDown',function(ev){that.touchStart(ev,action);},false);element.addEventListener('MSPointerUp',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.loader','impact.system','impact.input','impact.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});

// lib/impact/debug/menu.js
ig.baked=true;ig.module('impact.debug.menu').requires('dom.ready','impact.system').defines(function(){"use strict";ig.System.inject({run:function(){ig.debug.beforeRun();this.parent();ig.debug.afterRun();},setGameNow:function(gameClass){this.parent(gameClass);ig.debug.ready();}});ig.Debug=ig.Class.extend({options:{},panels:{},numbers:{},container:null,panelMenu:null,activePanel:null,debugTime:0,debugTickAvg:0.016,debugRealTime:Date.now(),init:function(){var style=ig.$new('link');style.rel='stylesheet';style.type='text/css';style.href=ig.prefix+'lib/impact/debug/debug.css';ig.$('body')[0].appendChild(style);this.container=ig.$new('div');this.container.className='ig_debug';ig.$('body')[0].appendChild(this.container);this.panelMenu=ig.$new('div');this.panelMenu.innerHTML='<div class="ig_debug_head">Impact.Debug:</div>';this.panelMenu.className='ig_debug_panel_menu';this.container.appendChild(this.panelMenu);this.numberContainer=ig.$new('div');this.numberContainer.className='ig_debug_stats';this.panelMenu.appendChild(this.numberContainer);if(window.console&&window.console.log&&window.console.assert){ig.log=console.log.bind?console.log.bind(console):console.log;ig.assert=console.assert.bind?console.assert.bind(console):console.assert;}
ig.show=this.showNumber.bind(this);},addNumber:function(name,width){var number=ig.$new('span');this.numberContainer.appendChild(number);this.numberContainer.appendChild(document.createTextNode(name));this.numbers[name]=number;},showNumber:function(name,number,width){if(!this.numbers[name]){this.addNumber(name,width);}
this.numbers[name].textContent=number;},addPanel:function(panelDef){var panel=new(panelDef.type)(panelDef.name,panelDef.label);if(panelDef.options){for(var i=0;i<panelDef.options.length;i++){var opt=panelDef.options[i];panel.addOption(new ig.DebugOption(opt.name,opt.object,opt.property));}}
this.panels[panel.name]=panel;panel.container.style.display='none';this.container.appendChild(panel.container);var menuItem=ig.$new('div');menuItem.className='ig_debug_menu_item';menuItem.textContent=panel.label;menuItem.addEventListener('click',(function(ev){this.togglePanel(panel);}).bind(this),false);panel.menuItem=menuItem;var inserted=false;for(var i=1;i<this.panelMenu.childNodes.length;i++){var cn=this.panelMenu.childNodes[i];if(cn.textContent>panel.label){this.panelMenu.insertBefore(menuItem,cn);inserted=true;break;}}
if(!inserted){this.panelMenu.appendChild(menuItem);}},showPanel:function(name){this.togglePanel(this.panels[name]);},togglePanel:function(panel){if(panel!=this.activePanel&&this.activePanel){this.activePanel.toggle(false);this.activePanel.menuItem.className='ig_debug_menu_item';this.activePanel=null;}
var dsp=panel.container.style.display;var active=(dsp!='block');panel.toggle(active);panel.menuItem.className='ig_debug_menu_item'+(active?' active':'');if(active){this.activePanel=panel;}},ready:function(){for(var p in this.panels){this.panels[p].ready();}},beforeRun:function(){var timeBeforeRun=Date.now();this.debugTickAvg=this.debugTickAvg*0.8+(timeBeforeRun-this.debugRealTime)*0.2;this.debugRealTime=timeBeforeRun;if(this.activePanel){this.activePanel.beforeRun();}},afterRun:function(){var frameTime=Date.now()-this.debugRealTime;var nextFrameDue=(1000/ig.system.fps)-frameTime;this.debugTime=this.debugTime*0.8+frameTime*0.2;if(this.activePanel){this.activePanel.afterRun();}
this.showNumber('ms',this.debugTime.toFixed(2));this.showNumber('fps',Math.round(1000/this.debugTickAvg));this.showNumber('draws',ig.Image.drawCount);if(ig.game&&ig.game.entities){this.showNumber('entities',ig.game.entities.length);}
ig.Image.drawCount=0;}});ig.DebugPanel=ig.Class.extend({active:false,container:null,options:[],panels:[],label:'',name:'',init:function(name,label){this.name=name;this.label=label;this.container=ig.$new('div');this.container.className='ig_debug_panel '+this.name;},toggle:function(active){this.active=active;this.container.style.display=active?'block':'none';},addPanel:function(panel){this.panels.push(panel);this.container.appendChild(panel.container);},addOption:function(option){this.options.push(option);this.container.appendChild(option.container);},ready:function(){},beforeRun:function(){},afterRun:function(){}});ig.DebugOption=ig.Class.extend({name:'',labelName:'',className:'ig_debug_option',label:null,mark:null,container:null,active:false,colors:{enabled:'#fff',disabled:'#444'},init:function(name,object,property){this.name=name;this.object=object;this.property=property;this.active=this.object[this.property];this.container=ig.$new('div');this.container.className='ig_debug_option';this.label=ig.$new('span');this.label.className='ig_debug_label';this.label.textContent=this.name;this.mark=ig.$new('span');this.mark.className='ig_debug_label_mark';this.container.appendChild(this.mark);this.container.appendChild(this.label);this.container.addEventListener('click',this.click.bind(this),false);this.setLabel();},setLabel:function(){this.mark.style.backgroundColor=this.active?this.colors.enabled:this.colors.disabled;},click:function(ev){this.active=!this.active;this.object[this.property]=this.active;this.setLabel();ev.stopPropagation();ev.preventDefault();return false;}});ig.debug=new ig.Debug();});

// lib/impact/animation.js
ig.baked=true;ig.module('impact.animation').requires('impact.timer','impact.image').defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(path,width,height){this.width=width;this.height=height;this.image=new ig.Image(path);}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:false,y:false},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(sheet,frameTime,sequence,stop){this.sheet=sheet;this.pivot={x:sheet.width/2,y:sheet.height/2};this.timer=new ig.Timer();this.frameTime=frameTime;this.sequence=sequence;this.stop=!!stop;this.tile=this.sequence[0];},rewind:function(){this.timer.set();this.loopCount=0;this.frame=0;this.tile=this.sequence[0];return this;},gotoFrame:function(f){this.timer.set(this.frameTime*-f-0.0001);this.update();},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/this.sequence.length);if(this.stop&&this.loopCount>0){this.frame=this.sequence.length-1;}
else{this.frame=frameTotal%this.sequence.length;}
this.tile=this.sequence[this.frame];},draw:function(targetX,targetY){var bbsize=Math.max(this.sheet.width,this.sheet.height);if(targetX>ig.system.width||targetY>ig.system.height||targetX+bbsize<0||targetY+bbsize<0){return;}
if(this.alpha!=1){ig.system.context.globalAlpha=this.alpha;}
if(this.angle==0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);ig.system.context.restore();}
if(this.alpha!=1){ig.system.context.globalAlpha=1;}}});});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.animation','impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:false,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:false,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(x,y,settings){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=x;this.pos.y=this.last.y=y;ig.merge(this,settings);},reset:function(x,y,settings){var proto=this.constructor.prototype;this.pos.x=x;this.pos.y=y;this.last.x=x;this.last.y=y;this.vel.x=proto.vel.x;this.vel.y=proto.vel.y;this.accel.x=proto.accel.x;this.accel.y=proto.accel.y;this.health=proto.health;this._killed=proto._killed;this.standing=proto.standing;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this.collides=proto.collides;ig.merge(this,settings);},addAnim:function(name,frameTime,sequence,stop){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var a=new ig.Animation(this.animSheet,frameTime,sequence,stop);this.anims[name]=a;if(!this.currentAnim){this.currentAnim=a;}
return a;},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);if(this.currentAnim){this.currentAnim.update();}},getNewVelocity:function(vel,accel,friction,max){if(accel){return(vel+accel*ig.system.tick).limit(-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return vel.limit(-max,max);},handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos=res.pos;},draw:function(){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}},kill:function(){ig.game.removeEntity(this);},receiveDamage:function(amount,from){this.health-=amount;if(this.health<=0){this.kill();}},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},distanceTo:function(other){var xd=(this.pos.x+this.size.x/2)-(other.pos.x+other.size.x/2);var yd=(this.pos.y+this.size.y/2)-(other.pos.y+other.size.y/2);return Math.sqrt(xd*xd+yd*yd);},angleTo:function(other){return Math.atan2((other.pos.y+other.size.y/2)-(this.pos.y+this.size.y/2),(other.pos.x+other.size.x/2)-(this.pos.x+this.size.x/2));},check:function(other){},collideWith:function(other,axis){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE){ig.Entity.solveCollision(a,b);}};ig.Entity.solveCollision=function(a,b){var weak=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED){weak=a;}
else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED){weak=b;}
if(a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x){if(a.last.y<b.last.y){ig.Entity.seperateOnYAxis(a,b,weak);}
else{ig.Entity.seperateOnYAxis(b,a,weak);}
a.collideWith(b,'y');b.collideWith(a,'y');}
else if(a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y){if(a.last.x<b.last.x){ig.Entity.seperateOnXAxis(a,b,weak);}
else{ig.Entity.seperateOnXAxis(b,a,weak);}
a.collideWith(b,'x');b.collideWith(a,'x');}};ig.Entity.seperateOnXAxis=function(left,right,weak){var nudge=(left.pos.x+left.size.x-right.pos.x);if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,weak==left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x;}
else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2;right.vel.x=v2;var resLeft=ig.game.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=ig.game.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x);}};ig.Entity.seperateOnYAxis=function(top,bottom,weak){var nudge=(top.pos.y+top.size.y-bottom.pos.y);if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y;var nudgeX=0;if(weak==top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity){weak.standing=true;nudgeX=strong.vel.x*ig.system.tick;}
var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak==top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y;weak.pos.x=resWeak.pos.x;}
else if(ig.game.gravity&&(bottom.standing||top.vel.y>0)){var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y);top.pos.y=resTop.pos.y;if(top.bounciness>0&&top.vel.y>top.minBounceVelocity){top.vel.y*=-top.bounciness;}
else{top.standing=true;top.vel.y=0;}}
else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2;bottom.vel.y=v2;var nudgeX=bottom.vel.x*ig.system.tick;var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y);top.pos.y=resTop.pos.y;var resBottom=ig.game.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y;}};});

// lib/impact/debug/entities-panel.js
ig.baked=true;ig.module('impact.debug.entities-panel').requires('impact.debug.menu','impact.entity').defines(function(){"use strict";ig.Entity.inject({colors:{names:'#fff',velocities:'#0f0',boxes:'#f00'},draw:function(){this.parent();if(ig.Entity._debugShowBoxes){ig.system.context.strokeStyle=this.colors.boxes;ig.system.context.lineWidth=1.0;ig.system.context.strokeRect(ig.system.getDrawPos(this.pos.x.round()-ig.game.screen.x)-0.5,ig.system.getDrawPos(this.pos.y.round()-ig.game.screen.y)-0.5,this.size.x*ig.system.scale,this.size.y*ig.system.scale);}
if(ig.Entity._debugShowVelocities){var x=this.pos.x+this.size.x/2;var y=this.pos.y+this.size.y/2;this._debugDrawLine(this.colors.velocities,x,y,x+this.vel.x,y+this.vel.y);}
if(ig.Entity._debugShowNames){if(this.name){ig.system.context.fillStyle=this.colors.names;ig.system.context.fillText(this.name,ig.system.getDrawPos(this.pos.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y-ig.game.screen.y));}
if(typeof(this.target)=='object'){for(var t in this.target){var ent=ig.game.getEntityByName(this.target[t]);if(ent){this._debugDrawLine(this.colors.names,this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,ent.pos.x+ent.size.x/2,ent.pos.y+ent.size.y/2);}}}}},_debugDrawLine:function(color,sx,sy,dx,dy){ig.system.context.strokeStyle=color;ig.system.context.lineWidth=1.0;ig.system.context.beginPath();ig.system.context.moveTo(ig.system.getDrawPos(sx-ig.game.screen.x),ig.system.getDrawPos(sy-ig.game.screen.y));ig.system.context.lineTo(ig.system.getDrawPos(dx-ig.game.screen.x),ig.system.getDrawPos(dy-ig.game.screen.y));ig.system.context.stroke();ig.system.context.closePath();}});ig.Entity._debugEnableChecks=true;ig.Entity._debugShowBoxes=false;ig.Entity._debugShowVelocities=false;ig.Entity._debugShowNames=false;ig.Entity.oldCheckPair=ig.Entity.checkPair;ig.Entity.checkPair=function(a,b){if(!ig.Entity._debugEnableChecks){return;}
ig.Entity.oldCheckPair(a,b);};ig.debug.addPanel({type:ig.DebugPanel,name:'entities',label:'Entities',options:[{name:'Checks & Collisions',object:ig.Entity,property:'_debugEnableChecks'},{name:'Show Collision Boxes',object:ig.Entity,property:'_debugShowBoxes'},{name:'Show Velocities',object:ig.Entity,property:'_debugShowVelocities'},{name:'Show Names & Targets',object:ig.Entity,property:'_debugShowNames'}]});});

// lib/impact/map.js
ig.baked=true;ig.module('impact.map').defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(tilesize,data){this.tilesize=tilesize;this.data=data;this.height=data.length;this.width=data[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize;},getTile:function(x,y){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){return this.data[ty][tx];}
else{return 0;}},setTile:function(x,y,tile){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){this.data[ty][tx]=tile;}}});});

// lib/impact/collision-map.js
ig.baked=true;ig.module('impact.collision-map').requires('impact.map').defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||ig.CollisionMap.defaultTileDef;for(var t in this.tiledef){if(t|0>this.lastSlope){this.lastSlope=t|0;}}},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:false,y:false,slope:false},pos:{x:x,y:y},tile:{x:0,y:0}};var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;res.tile.x=t;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.tile.y=t;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny};return true;}
return false;}});var H=1/2,N=1/3,M=2/3,SOLID=true,NON_SOLID=false;ig.CollisionMap.defaultTileDef={5:[0,1,1,M,SOLID],6:[0,M,1,N,SOLID],7:[0,N,1,0,SOLID],3:[0,1,1,H,SOLID],4:[0,H,1,0,SOLID],2:[0,1,1,0,SOLID],10:[H,1,1,0,SOLID],21:[0,1,H,0,SOLID],32:[M,1,1,0,SOLID],43:[N,1,M,0,SOLID],54:[0,1,N,0,SOLID],27:[0,0,1,N,SOLID],28:[0,N,1,M,SOLID],29:[0,M,1,1,SOLID],25:[0,0,1,H,SOLID],26:[0,H,1,1,SOLID],24:[0,0,1,1,SOLID],11:[0,0,H,1,SOLID],22:[H,0,1,1,SOLID],33:[0,0,N,1,SOLID],44:[N,0,M,1,SOLID],55:[M,0,1,1,SOLID],16:[1,N,0,0,SOLID],17:[1,M,0,N,SOLID],18:[1,1,0,M,SOLID],14:[1,H,0,0,SOLID],15:[1,1,0,H,SOLID],13:[1,1,0,0,SOLID],8:[H,1,0,0,SOLID],19:[1,1,H,0,SOLID],30:[N,1,0,0,SOLID],41:[M,1,N,0,SOLID],52:[1,1,M,0,SOLID],38:[1,M,0,1,SOLID],39:[1,N,0,M,SOLID],40:[1,0,0,N,SOLID],36:[1,H,0,1,SOLID],37:[1,0,0,H,SOLID],35:[1,0,0,1,SOLID],9:[1,0,H,1,SOLID],20:[H,0,0,1,SOLID],31:[1,0,M,1,SOLID],42:[M,0,N,1,SOLID],53:[N,0,0,1,SOLID],12:[0,0,1,0,NON_SOLID],23:[1,1,0,1,NON_SOLID],34:[1,0,1,1,NON_SOLID],45:[0,1,0,0,NON_SOLID]};ig.CollisionMap.staticNoCollision={trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};}};});

// lib/impact/background-map.js
ig.baked=true;ig.module('impact.background-map').requires('impact.map','impact.image').defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:false,tilesetName:'',foreground:false,enabled:true,preRender:false,preRenderedChunks:null,chunkSize:512,debugChunks:false,anims:{},init:function(tilesize,data,tileset){this.parent(tilesize,data);this.setTileset(tileset);},setTileset:function(tileset){this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null;},setScreenPos:function(x,y){this.scroll.x=x/this.distance;this.scroll.y=y/this.distance;},preRenderMapToChunks:function(){var totalWidth=this.width*this.tilesize*ig.system.scale,totalHeight=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(totalWidth,totalHeight),this.chunkSize);var chunkCols=Math.ceil(totalWidth/this.chunkSize),chunkRows=Math.ceil(totalHeight/this.chunkSize);this.preRenderedChunks=[];for(var y=0;y<chunkRows;y++){this.preRenderedChunks[y]=[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x==chunkCols-1)?totalWidth-x*this.chunkSize:this.chunkSize;var chunkHeight=(y==chunkRows-1)?totalHeight-y*this.chunkSize:this.chunkSize;this.preRenderedChunks[y][x]=this.preRenderChunk(x,y,chunkWidth,chunkHeight);}}},preRenderChunk:function(cx,cy,w,h){var tw=w/this.tilesize/ig.system.scale+1,th=h/this.tilesize/ig.system.scale+1;var nx=(cx*this.chunkSize/ig.system.scale)%this.tilesize,ny=(cy*this.chunkSize/ig.system.scale)%this.tilesize;var tx=Math.floor(cx*this.chunkSize/this.tilesize/ig.system.scale),ty=Math.floor(cy*this.chunkSize/this.tilesize/ig.system.scale);var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;chunk.retinaResolutionEnabled=false;var chunkContext=chunk.getContext('2d');ig.System.scaleMode(chunk,chunkContext);var screenContext=ig.system.context;ig.system.context=chunkContext;for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<this.width&&y+ty<this.height){var tile=this.data[y+ty][x+tx];if(tile){this.tiles.drawTile(x*this.tilesize-nx,y*this.tilesize-ny,tile-1,this.tilesize);}}}}
ig.system.context=screenContext;return chunk;},draw:function(){if(!this.tiles.loaded||!this.enabled){return;}
if(this.preRender){this.drawPreRendered();}
else{this.drawTiled();}},drawPreRendered:function(){if(!this.preRenderedChunks){this.preRenderMapToChunks();}
var dx=ig.system.getDrawPos(this.scroll.x),dy=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var w=this.width*this.tilesize*ig.system.scale;dx=(dx%w+w)%w;var h=this.height*this.tilesize*ig.system.scale;dy=(dy%h+h)%h;}
var minChunkX=Math.max(Math.floor(dx/this.chunkSize),0),minChunkY=Math.max(Math.floor(dy/this.chunkSize),0),maxChunkX=Math.ceil((dx+ig.system.realWidth)/this.chunkSize),maxChunkY=Math.ceil((dy+ig.system.realHeight)/this.chunkSize),maxRealChunkX=this.preRenderedChunks[0].length,maxRealChunkY=this.preRenderedChunks.length;if(!this.repeat){maxChunkX=Math.min(maxChunkX,maxRealChunkX);maxChunkY=Math.min(maxChunkY,maxRealChunkY);}
var nudgeY=0;for(var cy=minChunkY;cy<maxChunkY;cy++){var nudgeX=0;for(var cx=minChunkX;cx<maxChunkX;cx++){var chunk=this.preRenderedChunks[cy%maxRealChunkY][cx%maxRealChunkX];var x=-dx+cx*this.chunkSize-nudgeX;var y=-dy+cy*this.chunkSize-nudgeY;ig.system.context.drawImage(chunk,x,y);ig.Image.drawCount++;if(this.debugChunks){ig.system.context.strokeStyle='#f0f';ig.system.context.strokeRect(x,y,this.chunkSize,this.chunkSize);}
if(this.repeat&&chunk.width<this.chunkSize&&x+chunk.width<ig.system.realWidth){nudgeX+=this.chunkSize-chunk.width;maxChunkX++;}}
if(this.repeat&&chunk.height<this.chunkSize&&y+chunk.height<ig.system.realHeight){nudgeY+=this.chunkSize-chunk.height;maxChunkY++;}}},drawTiled:function(){var tile=0,anim=null,tileOffsetX=(this.scroll.x/this.tilesize).toInt(),tileOffsetY=(this.scroll.y/this.tilesize).toInt(),pxOffsetX=this.scroll.x%this.tilesize,pxOffsetY=this.scroll.y%this.tilesize,pxMinX=-pxOffsetX-this.tilesize,pxMinY=-pxOffsetY-this.tilesize,pxMaxX=ig.system.width+this.tilesize-pxOffsetX,pxMaxY=ig.system.height+this.tilesize-pxOffsetY;for(var mapY=-1,pxY=pxMinY;pxY<pxMaxY;mapY++,pxY+=this.tilesize){var tileY=mapY+tileOffsetY;if(tileY>=this.height||tileY<0){if(!this.repeat){continue;}
tileY=(tileY%this.height+this.height)%this.height;}
for(var mapX=-1,pxX=pxMinX;pxX<pxMaxX;mapX++,pxX+=this.tilesize){var tileX=mapX+tileOffsetX;if(tileX>=this.width||tileX<0){if(!this.repeat){continue;}
tileX=(tileX%this.width+this.width)%this.width;}
if((tile=this.data[tileY][tileX])){if((anim=this.anims[tile-1])){anim.draw(pxX,pxY);}
else{this.tiles.drawTile(pxX,pxY,tile-1,this.tilesize);}}}}}});});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.entity','impact.collision-map','impact.background-map').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var i=0;i<data.entities.length;i++){var ent=data.entities[i];this.spawnEntity(ent.type,ent.x,ent.y,ent.settings);}
this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var i=0;i<data.layer.length;i++){var ld=data.layer[i];if(ld.name=='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else{var newMap=new ig.BackgroundMap(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;this.backgroundMaps.push(newMap);}}
for(var i=0;i<this.entities.length;i++){this.entities[i].ready();}},loadLevelDeferred:function(data){this._levelToLoad=data;},getMapByName:function(name){if(name=='collision'){return this.collisionMap;}
for(var i=0;i<this.backgroundMaps.length;i++){if(this.backgroundMaps[i].name==name){return this.backgroundMaps[i];}}
return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
return ent;},sortEntities:function(){this.entities.sort(this.sortBy);},sortEntitiesDeferred:function(){this._doSortEntities=true;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},run:function(){this.update();this.draw();},update:function(){if(this._levelToLoad){this.loadLevel(this._levelToLoad);this._levelToLoad=null;}
this.updateEntities();this.checkEntities();for(var i=0;i<this._deferredKill.length;i++){this._deferredKill[i].erase();this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];if(this._doSortEntities||this.autoSort){this.sortEntities();this._doSortEntities=false;}
for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(var a in anims){anims[a].update();}}},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var mapIndex;for(mapIndex=0;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];if(map.foreground){break;}
map.setScreenPos(this.screen.x,this.screen.y);map.draw();}
this.drawEntities();for(mapIndex;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];map.setScreenPos(this.screen.x,this.screen.y);map.draw();}},drawEntities:function(){for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},checkEntities:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/impact/debug/maps-panel.js
ig.baked=true;ig.module('impact.debug.maps-panel').requires('impact.debug.menu','impact.game','impact.background-map').defines(function(){"use strict";ig.Game.inject({loadLevel:function(data){this.parent(data);ig.debug.panels.maps.load(this);}});ig.DebugMapsPanel=ig.DebugPanel.extend({maps:[],mapScreens:[],init:function(name,label){this.parent(name,label);this.load();},load:function(game){this.options=[];this.panels=[];if(!game||!game.backgroundMaps.length){this.container.innerHTML='<em>No Maps Loaded</em>';return;}
this.maps=game.backgroundMaps;this.mapScreens=[];this.container.innerHTML='';for(var m=0;m<this.maps.length;m++){var map=this.maps[m];var subPanel=new ig.DebugPanel(m,'Layer '+m);var head=new ig.$new('strong');head.textContent=m+': '+map.tiles.path;subPanel.container.appendChild(head);subPanel.addOption(new ig.DebugOption('Enabled',map,'enabled'));subPanel.addOption(new ig.DebugOption('Pre Rendered',map,'preRender'));subPanel.addOption(new ig.DebugOption('Show Chunks',map,'debugChunks'));this.generateMiniMap(subPanel,map,m);this.addPanel(subPanel);}},generateMiniMap:function(panel,map,id){var s=ig.system.scale;var ts=ig.$new('canvas');var tsctx=ts.getContext('2d');var w=map.tiles.width*s;var h=map.tiles.height*s;var ws=w/map.tilesize;var hs=h/map.tilesize;ts.width=ws;ts.height=hs;tsctx.drawImage(map.tiles.data,0,0,w,h,0,0,ws,hs);var mapCanvas=ig.$new('canvas');mapCanvas.width=map.width*s;mapCanvas.height=map.height*s;var ctx=mapCanvas.getContext('2d');if(ig.game.clearColor){ctx.fillStyle=ig.game.clearColor;ctx.fillRect(0,0,w,h);}
var tile=0;for(var x=0;x<map.width;x++){for(var y=0;y<map.height;y++){if((tile=map.data[y][x])){ctx.drawImage(ts,Math.floor(((tile-1)*s)%ws),Math.floor((tile-1)*s/ws)*s,s,s,x*s,y*s,s,s);}}}
var mapContainer=ig.$new('div');mapContainer.className='ig_debug_map_container';mapContainer.style.width=map.width*s+'px';mapContainer.style.height=map.height*s+'px';var mapScreen=ig.$new('div');mapScreen.className='ig_debug_map_screen';mapScreen.style.width=((ig.system.width/map.tilesize)*s-2)+'px';mapScreen.style.height=((ig.system.height/map.tilesize)*s-2)+'px';this.mapScreens[id]=mapScreen;mapContainer.appendChild(mapCanvas);mapContainer.appendChild(mapScreen);panel.container.appendChild(mapContainer);},afterRun:function(){var s=ig.system.scale;for(var m=0;m<this.maps.length;m++){var map=this.maps[m];var screen=this.mapScreens[m];if(!map||!screen){continue;}
var x=map.scroll.x/map.tilesize;var y=map.scroll.y/map.tilesize;if(map.repeat){x%=map.width;y%=map.height;}
screen.style.left=(x*s)+'px';screen.style.top=(y*s)+'px';}}});ig.debug.addPanel({type:ig.DebugMapsPanel,name:'maps',label:'Background Maps'});});

// lib/impact/debug/graph-panel.js
ig.baked=true;ig.module('impact.debug.graph-panel').requires('impact.debug.menu','impact.system','impact.game','impact.image').defines(function(){"use strict";ig.Game.inject({draw:function(){ig.graph.beginClock('draw');this.parent();ig.graph.endClock('draw');},update:function(){ig.graph.beginClock('update');this.parent();ig.graph.endClock('update');},checkEntities:function(){ig.graph.beginClock('checks');this.parent();ig.graph.endClock('checks');}});ig.DebugGraphPanel=ig.DebugPanel.extend({clocks:{},marks:[],textY:0,height:128,ms:64,timeBeforeRun:0,init:function(name,label){this.parent(name,label);this.mark16ms=(this.height-(this.height/this.ms)*16).round();this.mark33ms=(this.height-(this.height/this.ms)*33).round();this.msHeight=this.height/this.ms;this.graph=ig.$new('canvas');this.graph.width=window.innerWidth;this.graph.height=this.height;this.container.appendChild(this.graph);this.ctx=this.graph.getContext('2d');this.ctx.fillStyle='#444';this.ctx.fillRect(0,this.mark16ms,this.graph.width,1);this.ctx.fillRect(0,this.mark33ms,this.graph.width,1);this.addGraphMark('16ms',this.mark16ms);this.addGraphMark('33ms',this.mark33ms);this.addClock('draw','Draw','#13baff');this.addClock('update','Entity Update','#bb0fff');this.addClock('checks','Entity Checks & Collisions','#a2e908');this.addClock('lag','System Lag','#f26900');ig.mark=this.mark.bind(this);ig.graph=this;},addGraphMark:function(name,height){var span=ig.$new('span');span.className='ig_debug_graph_mark';span.textContent=name;span.style.top=height.round()+'px';this.container.appendChild(span);},addClock:function(name,description,color){var mark=ig.$new('span');mark.className='ig_debug_legend_color';mark.style.backgroundColor=color;var number=ig.$new('span');number.className='ig_debug_legend_number';number.appendChild(document.createTextNode('0'));var legend=ig.$new('span');legend.className='ig_debug_legend';legend.appendChild(mark);legend.appendChild(document.createTextNode(description+' ('));legend.appendChild(number);legend.appendChild(document.createTextNode('ms)'));this.container.appendChild(legend);this.clocks[name]={description:description,color:color,current:0,start:Date.now(),avg:0,html:number};},beginClock:function(name,offset){this.clocks[name].start=Date.now()+(offset||0);},endClock:function(name){var c=this.clocks[name];c.current=Math.round(Date.now()-c.start);c.avg=c.avg*0.8+c.current*0.2;},mark:function(msg,color){if(this.active){this.marks.push({msg:msg,color:(color||'#fff')});}},beforeRun:function(){this.endClock('lag');this.timeBeforeRun=Date.now();},afterRun:function(){var frameTime=Date.now()-this.timeBeforeRun;var nextFrameDue=(1000/ig.system.fps)-frameTime;this.beginClock('lag',Math.max(nextFrameDue,0));var x=this.graph.width-1;var y=this.height;this.ctx.drawImage(this.graph,-1,0);this.ctx.fillStyle='#000';this.ctx.fillRect(x,0,1,this.height);this.ctx.fillStyle='#444';this.ctx.fillRect(x,this.mark16ms,1,1);this.ctx.fillStyle='#444';this.ctx.fillRect(x,this.mark33ms,1,1);for(var ci in this.clocks){var c=this.clocks[ci];c.html.textContent=c.avg.toFixed(2);if(c.color&&c.current>0){this.ctx.fillStyle=c.color;var h=c.current*this.msHeight;y-=h;this.ctx.fillRect(x,y,1,h);c.current=0;}}
this.ctx.textAlign='right';this.ctx.textBaseline='top';this.ctx.globalAlpha=0.5;for(var i=0;i<this.marks.length;i++){var m=this.marks[i];this.ctx.fillStyle=m.color;this.ctx.fillRect(x,0,1,this.height);if(m.msg){this.ctx.fillText(m.msg,x-1,this.textY);this.textY=(this.textY+8)%32;}}
this.ctx.globalAlpha=1;this.marks=[];}});ig.debug.addPanel({type:ig.DebugGraphPanel,name:'graph',label:'Performance'});});

// lib/impact/debug/debug.js
ig.baked=true;ig.module('impact.debug.debug').requires('impact.debug.entities-panel','impact.debug.maps-panel','impact.debug.graph-panel').defines(function(){"use strict";});

// lib/plugins/touch-button.js
ig.baked=true;ig.module('plugins.touch-button').requires('impact.system','impact.input','impact.image').defines(function(){"use strict";ig.TouchButton=ig.Class.extend({action:'undefined',image:null,tile:0,pos:{x:0,y:0},size:{x:0,y:0},area:{x1:0,y1:0,x2:0,y2:0},pressed:false,touchId:0,anchor:null,init:function(action,anchor,width,height,image,tile){this.action=action;this.anchor=anchor;this.size={x:width,y:height};this.image=image||null;this.tile=tile||0;},align:function(w,h){if('left'in this.anchor){this.pos.x=this.anchor.left;}
else if('right'in this.anchor){this.pos.x=w-this.anchor.right-this.size.x;}
if('top'in this.anchor){this.pos.y=this.anchor.top;}
else if('bottom'in this.anchor){this.pos.y=h-this.anchor.bottom-this.size.y;}
var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var s=ig.system.scale*(internalWidth/ig.system.realWidth);this.area={x1:this.pos.x*s,y1:this.pos.y*s,x2:(this.pos.x+this.size.x)*s,y2:(this.pos.y+this.size.y+20)*s};},touchStart:function(ev){if(this.pressed){return;}
var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
for(var i=0;i<ev.touches.length;i++){var touch=ev.touches[i];if(this.checkStart(touch.identifier,touch.clientX-pos.left,touch.clientY-pos.top)){return;}}},touchEnd:function(ev){if(!this.pressed){return;}
for(var i=0;i<ev.changedTouches.length;i++){if(this.checkEnd(ev.changedTouches[i].identifier)){return;}}},touchStartMS:function(ev){if(this.pressed){return;}
var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
this.checkStart(ev.pointerId,ev.clientX-pos.left,ev.clientY-pos.top);},touchEndMS:function(ev){if(!this.pressed){return;}
this.checkEnd(ev.pointerId);},checkStart:function(id,x,y){if(x>this.area.x1&&x<this.area.x2&&y>this.area.y1&&y<this.area.y2){this.pressed=true;this.touchId=id;ig.input.actions[this.action]=true;if(!ig.input.locks[this.action]){ig.input.presses[this.action]=true;ig.input.locks[this.action]=true;}
return true;}
return false;},checkEnd:function(id){if(id===this.touchId){this.pressed=false;this.touchId=0;ig.input.delayedKeyup[this.action]=true;return true;}
return false;},draw:function(){if(this.image){this.image.drawTile(this.pos.x,this.pos.y,this.tile,this.size.x,this.size.y);}}});ig.TouchButtonCollection=ig.Class.extend({buttons:[],init:function(buttons){this.buttons=buttons;document.addEventListener('touchstart',this.touchStart.bind(this),false);document.addEventListener('touchend',this.touchEnd.bind(this),false);document.addEventListener('pointerdown',this.touchStartMS.bind(this),false);document.addEventListener('pointerup',this.touchEndMS.bind(this),false);document.body.style.msTouchAction='none';},touchStart:function(ev){ev.preventDefault();for(var i=0;i<this.buttons.length;i++){this.buttons[i].touchStart(ev);}},touchEnd:function(ev){ev.preventDefault();for(var i=0;i<this.buttons.length;i++){this.buttons[i].touchEnd(ev);}},touchStartMS:function(ev){ev.preventDefault();for(var i=0;i<this.buttons.length;i++){this.buttons[i].touchStartMS(ev);}},touchEndMS:function(ev){ev.preventDefault();for(var i=0;i<this.buttons.length;i++){this.buttons[i].touchEndMS(ev);}},align:function(){var w=ig.system.width||window.innerWidth;var h=ig.system.height||window.innerHeight;for(var i=0;i<this.buttons.length;i++){this.buttons[i].align(w,h);}},draw:function(){for(var i=0;i<this.buttons.length;i++){this.buttons[i].draw();}}});});

// lib/game/entities/SrStrawberry.js
ig.baked=true;ig.module('game.entities.SrStrawberry').requires('impact.entity','plugins.touch-button').defines(function(){EntitySrStrawberry=ig.Entity.extend({name:'SrStrawberry',size:{x:320,y:360},zIndex:999,animSheet:new ig.AnimationSheet('media/sr_strawberry.jpg',320,360),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('blink',0.05,[1,2,3,4,5,6,7,8,9,10,11,0,1,2,3,4,5,6,7,8,9,10,11,0,1,2,3,4,5,6,7,8,9,10,11,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('blink',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('blink')){this.currentAnim=this.anims.blink.rewind();}}});});

// lib/game/entities/Strawberry.js
ig.baked=true;ig.module('game.entities.Strawberry').requires('impact.entity').defines(function(){EntityStrawberry=ig.Entity.extend({zIndex:999,init:function(x,y,settings){this.addAnim('idle',1,[0]);this.parent(x,y,settings);},update:function(){if(this.pos.y>ig.game.screen.y+ig.system.realHeight){this.pos.y=-376;}
this.pos.y+=1;this.currentAnim.angle+=0.02;this.parent();}});});

// lib/game/entities/Strawberry01.js
ig.baked=true;ig.module('game.entities.Strawberry01').requires('impact.entity','game.entities.Strawberry').defines(function(){EntityStrawberry01=EntityStrawberry.extend({name:'Strawberry01',size:{x:129,y:175},animSheet:new ig.AnimationSheet('media/fresa01.png',129,175)});});

// lib/game/entities/Strawberry02.js
ig.baked=true;ig.module('game.entities.Strawberry02').requires('impact.entity','game.entities.Strawberry').defines(function(){EntityStrawberry02=EntityStrawberry.extend({name:'Strawberry02',size:{x:178,y:141},animSheet:new ig.AnimationSheet('media/fresa02.png',178,141)});});

// lib/game/entities/Strawberry03.js
ig.baked=true;ig.module('game.entities.Strawberry03').requires('impact.entity','game.entities.Strawberry').defines(function(){EntityStrawberry03=EntityStrawberry.extend({name:'Strawberry03',size:{x:220,y:186},animSheet:new ig.AnimationSheet('media/fresa03.png',220,186)});});

// lib/game/levels/rojo.js
ig.baked=true;ig.module('game.levels.rojo').requires('impact.image','game.entities.SrStrawberry','game.entities.Strawberry01','game.entities.Strawberry02','game.entities.Strawberry03').defines(function(){LevelRojo={"name":"LevelRojo","entities":[{"type":"EntitySrStrawberry","x":96,"y":170},{"type":"EntityStrawberry01","x":561,"y":-420},{"type":"EntityStrawberry02","x":694,"y":-626},{"type":"EntityStrawberry03","x":752,"y":-188}],"layer":[{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,1,0,0],[1,1,0,0],[1,1,0,0]]},{"name":"fondo_rojo","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_rojo.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]},{"name":"textura","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/textura_rojo.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":true,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]}]};LevelRojoResources=[new ig.Image('media/blanco.png'),new ig.Image('media/fondo_rojo.jpg'),new ig.Image('media/textura_rojo.png'),new ig.Sound("media/sp/Rojo.*"),new ig.Sound("media/en/Rojo.*"),new ig.Sound("media/gl/Rojo.*")];});

// lib/game/levels/home.js
ig.baked=true;ig.module('game.levels.home').requires('impact.image').defines(function(){LevelHome={"name":"LevelHome","entities":[],"layer":[{"name":"fondo","width":4,"height":3,"linkWithCollision":false,"visible":true,"tilesetName":"media/launch_image.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,2,3,4],[5,6,7,8],[9,10,11,12]]}]};LevelHomeResources=[new ig.Image('media/launch_image.jpg')];});

// lib/game/entities/Orange.js
ig.baked=true;ig.module('game.entities.Orange').requires('impact.entity').defines(function(){EntityOrange=ig.Entity.extend({zIndex:999,init:function(x,y,settings){this.addAnim('idle',1,[0]);this.parent(x,y,settings);},update:function(){this.currentAnim.angle+=0.01;this.parent();}});});

// lib/game/entities/Orange01.js
ig.baked=true;ig.module('game.entities.Orange01').requires('impact.entity','game.entities.Orange').defines(function(){EntityOrange01=EntityOrange.extend({name:'Orange01',size:{x:272,y:256},animSheet:new ig.AnimationSheet('media/naranja_01.png',272,256)});});

// lib/game/entities/Orange02.js
ig.baked=true;ig.module('game.entities.Orange02').requires('impact.entity','game.entities.Orange').defines(function(){EntityOrange02=EntityOrange.extend({name:'Orange02',size:{x:291,y:273},animSheet:new ig.AnimationSheet('media/naranja_02.png',291,273)});});

// lib/game/entities/SrOrange.js
ig.baked=true;ig.module('game.entities.SrOrange').requires('impact.entity','plugins.touch-button').defines(function(){EntitySrOrange=ig.Entity.extend({name:'SrStrawberry',size:{x:305,y:301},zIndex:999,animSheet:new ig.AnimationSheet('media/sr_orange.jpg',305,301),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('tongue',0.2,[1,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('tongue',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('tongue')){this.currentAnim=this.anims.tongue.rewind();}}});});

// lib/game/levels/naranja.js
ig.baked=true;ig.module('game.levels.naranja').requires('impact.image','game.entities.Orange01','game.entities.Orange02','game.entities.SrOrange').defines(function(){LevelNaranja={"name":"LevelNaranja","entities":[{"type":"EntityOrange01","x":732,"y":138},{"type":"EntityOrange02","x":492,"y":444},{"type":"EntitySrOrange","x":100,"y":210}],"layer":[{"name":"fondo_naranja","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_naranja.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]},{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,1,0,0],[1,1,0,0],[1,1,0,0]]},{"name":"tapar_naranja","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":true,"data":[[0,0,0,0],[0,0,0,0],[0,1,0,0]]},{"name":"textura","width":4,"height":3,"linkWithCollision":false,"visible":0,"tilesetName":"media/textura_naranja.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":true,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]}]};LevelNaranjaResources=[new ig.Image('media/fondo_naranja.jpg'),new ig.Image('media/blanco.png'),new ig.Image('media/blanco.png'),new ig.Image('media/textura_naranja.png'),new ig.Sound("media/sp/Naranja.*"),new ig.Sound("media/en/Naranja.*"),new ig.Sound("media/gl/Naranja.*")];});

// lib/game/entities/Rayos02.js
ig.baked=true;ig.module('game.entities.Rayos02').requires('impact.entity').defines(function(){EntityRayos02=ig.Entity.extend({name:'Rayos02',size:{x:1412,y:1410},zIndex:-10,animSheet:new ig.AnimationSheet('media/02_rayos.png',1412,1410),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.parent(x,y,settings);},update:function(){this.currentAnim.angle+=0.0008;}});});

// lib/game/entities/SrYellow.js
ig.baked=true;ig.module('game.entities.SrYellow').requires('impact.entity','plugins.touch-button').defines(function(){EntitySrYellow=ig.Entity.extend({name:'SrYellow',size:{x:190,y:363},zIndex:999,animSheet:new ig.AnimationSheet('media/sr_yellow.jpg',190,363),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('wave',0.041,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('wave',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('wave')){this.currentAnim=this.anims.wave.rewind();}}});});

// lib/game/levels/amarillo.js
ig.baked=true;ig.module('game.levels.amarillo').requires('impact.image','game.entities.Rayos02','game.entities.SrYellow').defines(function(){LevelAmarillo={"name":"LevelAmarillo","entities":[{"type":"EntityRayos02","x":160,"y":-472},{"type":"EntitySrYellow","x":176,"y":156}],"layer":[{"name":"fondo","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_amarillo.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]},{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,1,0,0],[1,1,0,0],[1,1,0,0]]},{"name":"sol","width":16,"height":12,"linkWithCollision":false,"visible":1,"tilesetName":"media/03_sol.png","repeat":false,"preRender":false,"distance":"1","tilesize":64,"foreground":true,"data":[[681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696],[729,730,731,732,733,734,735,736,737,0,0,0,0,0,0,0],[777,778,779,780,781,782,783,784,785,0,0,0,1,2,3,0],[825,826,827,828,829,830,831,832,833,0,0,0,4,5,6,0],[873,874,875,876,877,878,879,880,881,0,0,0,7,8,9,0],[921,922,923,924,925,926,927,928,929,0,0,0,0,0,0,0],[969,970,971,972,973,974,975,976,977,0,0,0,0,0,0,0],[1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032],[1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080],[1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128],[1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176],[1209,1210,1211,1212,1213,1214,1215,1216,1217,1218,1219,1220,1221,1222,1223,1224]]},{"name":"textura","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/textura_amarillo.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":true,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]}]};LevelAmarilloResources=[new ig.Image('media/fondo_amarillo.jpg'),new ig.Image('media/blanco.png'),new ig.Image('media/03_sol.png'),new ig.Image('media/textura_amarillo.png'),new ig.Sound("media/sp/Amarillo.*"),new ig.Sound("media/en/Amarillo.*"),new ig.Sound("media/gl/Amarillo.*")];});

// lib/game/entities/SrGreen.js
ig.baked=true;ig.module('game.entities.SrGreen').requires('impact.entity','plugins.touch-button').defines(function(){EntitySrGreen=ig.Entity.extend({name:'SrGreen',size:{x:290,y:392},zIndex:999,animSheet:new ig.AnimationSheet('media/sr_green.jpg',290,392),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('blink',0.1,[1,2,3,4,5,6,7,8,9,10,11,0,1,2,3,4,5,6,7,8,9,10,11,0,1,2,3,4,5,6,7,8,9,10,11,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('blink',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('blink')){this.currentAnim=this.anims.blink.rewind();}}});});

// lib/game/entities/Arbol.js
ig.baked=true;ig.module('game.entities.Arbol').requires('impact.entity').defines(function(){EntityArbol=ig.Entity.extend({zIndex:999,init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('move',0.061,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,0]);this.parent(x,y,settings);},update:function(){this.parent();if(this.currentAnim===this.anims.idle){this.currentAnim=this.anims.move.rewind();}}});});

// lib/game/entities/Arbol01.js
ig.baked=true;ig.module('game.entities.Arbol01').requires('game.entities.Arbol').defines(function(){EntityArbol01=EntityArbol.extend({name:'Arbol01',size:{x:208,y:201},animSheet:new ig.AnimationSheet('media/arbol01_sprite.png',208,201),});});

// lib/game/entities/Arbol02.js
ig.baked=true;ig.module('game.entities.Arbol02').requires('game.entities.Arbol').defines(function(){EntityArbol02=EntityArbol.extend({name:'Arbol02',size:{x:208,y:201},animSheet:new ig.AnimationSheet('media/arbol02_sprite.png',208,201),});});

// lib/game/levels/green.js
ig.baked=true;ig.module('game.levels.green').requires('impact.image','game.entities.SrGreen','game.entities.Arbol01','game.entities.Arbol02').defines(function(){LevelGreen={"name":"LevelGreen","entities":[{"type":"EntitySrGreen","x":104,"y":144},{"type":"EntityArbol01","x":600,"y":314},{"type":"EntityArbol02","x":516,"y":190},{"type":"EntityArbol01","x":754,"y":40},{"type":"EntityArbol02","x":696,"y":174},{"type":"EntityArbol01","x":570,"y":44},{"type":"EntityArbol02","x":874,"y":190},{"type":"EntityArbol01","x":790,"y":310},{"type":"EntityArbol02","x":518,"y":446},{"type":"EntityArbol02","x":704,"y":448},{"type":"EntityArbol02","x":878,"y":460},{"type":"EntityArbol01","x":586,"y":566},{"type":"EntityArbol01","x":758,"y":578}],"layer":[{"name":"fondo_verde","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_verde.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]},{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,1,0,0],[1,1,0,0],[1,1,0,0]]}]};LevelGreenResources=[new ig.Image('media/fondo_verde.jpg'),new ig.Image('media/blanco.png'),new ig.Sound("media/sp/Verde.*"),new ig.Sound("media/en/Verde.*"),new ig.Sound("media/gl/Verde.*")];});

// lib/game/entities/SrBlue.js
ig.baked=true;ig.module('game.entities.SrBlue').requires('impact.entity','plugins.touch-button').defines(function(){EntitySrBlue=ig.Entity.extend({name:'SrBlue',size:{x:185,y:243},zIndex:999,animSheet:new ig.AnimationSheet('media/sr_blue.png',185,243),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('pointing',0.041,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('ponting',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('ponting')){this.currentAnim=this.anims.pointing.rewind();}}});});

// lib/game/entities/Nube.js
ig.baked=true;ig.module('game.entities.Nube').requires('impact.entity').defines(function(){EntityNube=ig.Entity.extend({zIndex:999,init:function(x,y,settings){this.addAnim('idle',1,[0]);this.parent(x,y,settings);},update:function(){this.parent();if(this.pos.x+this.size.x<(ig.game.screen.x+ig.system.realWidth)/2){this.pos.x=ig.system.realWidth;}}});});

// lib/game/entities/Nube01.js
ig.baked=true;ig.module('game.entities.Nube01').requires('game.entities.Nube').defines(function(){EntityNube01=EntityNube.extend({name:'Nube01',size:{x:184,y:82},animSheet:new ig.AnimationSheet('media/nube01.png',184,82),init:function(x,y,settings){this.vel.x=-50;this.parent(x,y,settings);}});});

// lib/game/entities/Nube02.js
ig.baked=true;ig.module('game.entities.Nube02').requires('game.entities.Nube').defines(function(){EntityNube02=EntityNube.extend({name:'Nube02',size:{x:193,y:80},animSheet:new ig.AnimationSheet('media/nube02.png',193,80),init:function(x,y,settings){this.vel.x=-45;this.parent(x,y,settings);}});});

// lib/game/entities/Nube03.js
ig.baked=true;ig.module('game.entities.Nube03').requires('game.entities.Nube').defines(function(){EntityNube03=EntityNube.extend({name:'Nube03',size:{x:193,y:84},animSheet:new ig.AnimationSheet('media/nube03.png',193,84),init:function(x,y,settings){this.vel.x=-30;this.accel.x=-2;this.parent(x,y,settings);}});});

// lib/game/entities/Nube04.js
ig.baked=true;ig.module('game.entities.Nube04').requires('game.entities.Nube').defines(function(){EntityNube04=EntityNube.extend({name:'Nube04',size:{x:253,y:119},animSheet:new ig.AnimationSheet('media/nube04.png',253,119),init:function(x,y,settings){this.vel.x=-37;this.parent(x,y,settings);}});});

// lib/game/entities/Nube05.js
ig.baked=true;ig.module('game.entities.Nube05').requires('game.entities.Nube').defines(function(){EntityNube05=EntityNube.extend({name:'Nube05',size:{x:228,y:101},animSheet:new ig.AnimationSheet('media/nube05.png',228,101),init:function(x,y,settings){this.vel.x=-33;this.parent(x,y,settings);}});});

// lib/game/entities/Pajaro.js
ig.baked=true;ig.module('game.entities.Pajaro').requires('impact.entity').defines(function(){EntityPajaro=ig.Entity.extend({name:'Pajaro',size:{x:145,y:138},zIndex:999,origY:0,animSheet:new ig.AnimationSheet('media/pajaro.png',145,138),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('fly',0.2,[1,2,1,2,1,2,1,2,0],true);this.vel.x=40;this.vel.y=10;this.origY=y;this.parent(x,y,settings);},update:function(){this.parent();if(this.pos.x>ig.game.screen.x+ig.system.realWidth){this.pos.x=(ig.system.realWidth/2)-(this.size.y*2);this.pos.y=this.origY;}
if(this.currentAnim===this.anims.idle&&this.currentAnim.loopCount>2){this.currentAnim=this.anims.fly.rewind();}
if(this.currentAnim===this.anims.fly&&this.currentAnim.frame===8){this.currentAnim=this.anims.idle.rewind();}
if(this.currentAnim===this.anims.fly){this.pos.x+=1;this.pos.y-=1;}}});});

// lib/game/levels/azul.js
ig.baked=true;ig.module('game.levels.azul').requires('impact.image','game.entities.SrBlue','game.entities.Nube01','game.entities.Nube02','game.entities.Nube03','game.entities.Nube04','game.entities.Nube05','game.entities.Pajaro').defines(function(){LevelAzul={"name":"LevelAzul","entities":[{"type":"EntitySrBlue","x":144,"y":252},{"type":"EntityNube01","x":660,"y":560},{"type":"EntityNube02","x":416,"y":616},{"type":"EntityNube03","x":568,"y":676},{"type":"EntityNube04","x":852,"y":636},{"type":"EntityNube05","x":980,"y":508},{"type":"EntityPajaro","x":604,"y":144}],"layer":[{"name":"fondo_azul","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_azul.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]},{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,1,0,0],[1,1,0,0],[1,1,0,0]]}]};LevelAzulResources=[new ig.Image('media/fondo_azul.jpg'),new ig.Image('media/blanco.png'),new ig.Sound("media/sp/Azul.*"),new ig.Sound("media/en/Azul.*"),new ig.Sound("media/gl/Azul.*")];});

// lib/game/entities/Ola.js
ig.baked=true;ig.module('game.entities.Ola').requires('impact.entity').defines(function(){EntityOla=ig.Entity.extend({zIndex:999,i:0,origY:0,origX:0,velocity:30,radious:2,init:function(x,y,settings){this.origY=y;this.origX=x;this.parent(x,y,settings);},update:function(){var limit=2*Math.PI;var increase=Math.PI/100;this.i=(this.i>limit?0:this.i+increase);this.pos.y=this.origY-(this.velocity*Math.sin(this.radious*this.i));if(this.i<Math.PI){this.pos.x=this.origX+(this.velocity*this.i);}else{this.pos.x=this.origX+(this.velocity*(limit-this.i));}
this.parent();}});});

// lib/game/entities/Ola01.js
ig.baked=true;ig.module('game.entities.Ola01').requires('game.entities.Ola').defines(function(){EntityOla01=EntityOla.extend({name:'Ola01',size:{x:768,y:230},animSheet:new ig.AnimationSheet('media/olas01.png',768,230),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.origY=y;this.origX=x;this.parent(x,y,settings);},});});

// lib/game/entities/Ola02.js
ig.baked=true;ig.module('game.entities.Ola02').requires('game.entities.Ola').defines(function(){EntityOla02=EntityOla.extend({name:'Ola02',size:{x:768,y:221},animSheet:new ig.AnimationSheet('media/olas02.png',768,221),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.origY=y;this.origX=x;this.parent(x,y,settings);},});});

// lib/game/entities/Ola03.js
ig.baked=true;ig.module('game.entities.Ola03').requires('game.entities.Ola').defines(function(){EntityOla03=EntityOla.extend({name:'Ola03',size:{x:768,y:220},animSheet:new ig.AnimationSheet('media/olas03.png',768,220),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.origY=y;this.origX=x;this.parent(x,y,settings);},});});

// lib/game/entities/Ola04.js
ig.baked=true;ig.module('game.entities.Ola04').requires('game.entities.Ola').defines(function(){EntityOla04=EntityOla.extend({name:'Ola04',size:{x:768,y:195},animSheet:new ig.AnimationSheet('media/olas04.png',768,195),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.origY=y;this.origX=x;this.parent(x,y,settings);},});});

// lib/game/entities/Ola05.js
ig.baked=true;ig.module('game.entities.Ola05').requires('game.entities.Ola').defines(function(){EntityOla05=EntityOla.extend({name:'Ola05',size:{x:768,y:229},animSheet:new ig.AnimationSheet('media/olas05.png',768,229),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.origY=y;this.origX=x;this.parent(x,y,settings);},});});

// lib/game/entities/Pez.js
ig.baked=true;ig.module('game.entities.Pez').requires('impact.entity').defines(function(){EntityPez=ig.Entity.extend({zIndex:998,origY:0,refX:0,init:function(x,y,settings){this.addAnim('idle',1,[0]);this.origY=y;this.refX=x;this.vel.x=-75;this.parent(x,y,settings);},update:function(){this.parent();var x=this.refX-this.pos.x;this.pos.y=this.origY-(100*Math.sin(0.01*x));var y=this.origY-this.pos.y;this.refX=(y===0?this.pos.x:this.refX);this.anims.idle.angle=(Math.atan(y/x)||0.0);if(this.pos.x+this.size.x<(ig.game.screen.x+ig.system.realWidth)/2){this.pos.x=ig.system.realWidth;this.refX=this.pos.x;this.origY=Math.floor(Math.random()*(ig.system.realHeight-400+1)+400);}}});});

// lib/game/entities/Pez01.js
ig.baked=true;ig.module('game.entities.Pez01').requires('game.entities.Pez').defines(function(){EntityPez01=EntityPez.extend({name:'Pez01',size:{x:81,y:44},animSheet:new ig.AnimationSheet('media/pez01.png',81,44)});});

// lib/game/entities/Pez02.js
ig.baked=true;ig.module('game.entities.Pez02').requires('game.entities.Pez').defines(function(){EntityPez02=EntityPez.extend({name:'Pez02',size:{x:75,y:50},animSheet:new ig.AnimationSheet('media/pez02.png',75,50)});});

// lib/game/entities/Ola06.js
ig.baked=true;ig.module('game.entities.Ola06').requires('game.entities.Ola').defines(function(){EntityOla06=EntityOla.extend({name:'Ola06',size:{x:785,y:204},animSheet:new ig.AnimationSheet('media/olas06.png',785,204),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.origY=y;this.origX=x;this.parent(x,y,settings);},});});

// lib/game/entities/White.js
ig.baked=true;ig.module('game.entities.White').requires('impact.entity').defines(function(){EntityWhite=ig.Entity.extend({name:'White',size:{x:256,y:256},zIndex:0,animSheet:new ig.AnimationSheet('media/blanco.png',256,256),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.parent(x,y,settings);}});});

// lib/game/entities/SrIndigo.js
ig.baked=true;ig.module('game.entities.SrIndigo').requires('impact.entity','plugins.touch-button').defines(function(){EntitySrIndigo=ig.Entity.extend({name:'SrIndigo',size:{x:280,y:244},zIndex:999,animSheet:new ig.AnimationSheet('media/sr_indigo.png',280,244),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('showoff',0.041,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('showoff',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('showoff')){this.currentAnim=this.anims.showoff.rewind();}}});});

// lib/game/levels/anil.js
ig.baked=true;ig.module('game.levels.anil').requires('impact.image','game.entities.Ola01','game.entities.Ola02','game.entities.Ola03','game.entities.Ola04','game.entities.Ola05','game.entities.Pez01','game.entities.Pez02','game.entities.Ola06','game.entities.White','game.entities.SrIndigo').defines(function(){LevelAnil={"name":"LevelAnil","entities":[{"type":"EntityOla01","x":358,"y":154,"settings":{"zIndex":994,"radious":2}},{"type":"EntityOla02","x":364,"y":260,"settings":{"zIndex":995,"radious":1}},{"type":"EntityOla03","x":360,"y":350,"settings":{"zIndex":996,"radious":2}},{"type":"EntityOla04","x":358,"y":424,"settings":{"zIndex":997,"radious":1}},{"type":"EntityOla05","x":376,"y":500,"settings":{"zIndex":998,"radious":2}},{"type":"EntityPez01","x":874,"y":598},{"type":"EntityPez02","x":660,"y":502},{"type":"EntityOla06","x":392,"y":600,"settings":{"zIndex":999,"radious":1}},{"type":"EntityWhite","x":256,"y":512,"settings":{"zIndex":1000}},{"type":"EntityWhite","x":256,"y":256,"settings":{"zIndex":1000}},{"type":"EntityWhite","x":256,"y":2,"settings":{"zIndex":1000}},{"type":"EntitySrIndigo","x":112,"y":276,"settings":{"zIndex":1001}}],"layer":[{"name":"fondo_anil","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_anil.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]},{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,1,0,0],[1,1,0,0],[1,1,0,0]]},{"name":"textura","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/textura_anil.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":true,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]}]};LevelAnilResources=[new ig.Image('media/fondo_anil.jpg'),new ig.Image('media/blanco.png'),new ig.Image('media/textura_anil.png'),new ig.Sound("media/sp/Anil.*"),new ig.Sound("media/en/Anil.*"),new ig.Sound("media/gl/Anil.*")];});

// lib/game/entities/SrtViolet.js
ig.baked=true;ig.module('game.entities.SrtViolet').requires('impact.entity','plugins.touch-button').defines(function(){EntitySrtViolet=ig.Entity.extend({name:'SrtViolet',size:{x:292,y:331},zIndex:999,animSheet:new ig.AnimationSheet('media/sr_violet.jpg',292,331),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('dance',0.041,[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,21,23,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('dance',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('dance')){this.currentAnim=this.anims.dance.rewind();}}});});

// lib/game/entities/Flor.js
ig.baked=true;ig.module('game.entities.Flor').requires('impact.entity').defines(function(){EntityFlor=ig.Entity.extend({zIndex:999,name:'Flor',size:{x:148,y:150},animSheet:new ig.AnimationSheet('media/flor.png',148,150),direction:1,init:function(x,y,settings){this.addAnim('idle',1,[0]);this.parent(x,y,settings);},update:function(){this.currentAnim.angle+=this.direction*0.01;this.parent();}});});

// lib/game/levels/violeta.js
ig.baked=true;ig.module('game.levels.violeta').requires('impact.image','game.entities.SrtViolet','game.entities.Flor').defines(function(){LevelVioleta={"name":"LevelVioleta","entities":[{"type":"EntitySrtViolet","x":112,"y":216},{"type":"EntityFlor","x":524,"y":104},{"type":"EntityFlor","x":704,"y":104},{"type":"EntityFlor","x":880,"y":104},{"type":"EntityFlor","x":608,"y":268,"settings":{"direction":-1}},{"type":"EntityFlor","x":804,"y":268,"settings":{"direction":-1}},{"type":"EntityFlor","x":524,"y":444},{"type":"EntityFlor","x":704,"y":444},{"type":"EntityFlor","x":880,"y":444},{"type":"EntityFlor","x":608,"y":616,"settings":{"direction":-1}},{"type":"EntityFlor","x":804,"y":612,"settings":{"direction":-1}}],"layer":[{"name":"fondo","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_violeta.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]},{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,1,0,0],[1,1,0,0],[1,1,0,0]]},{"name":"textura","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/textura_violeta.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":true,"data":[[0,0,1,2],[0,0,3,4],[0,0,5,6]]}]};LevelVioletaResources=[new ig.Image('media/fondo_violeta.jpg'),new ig.Image('media/blanco.png'),new ig.Image('media/textura_violeta.png'),new ig.Sound("media/sp/Violeta.*"),new ig.Sound("media/en/Violeta.*"),new ig.Sound("media/gl/Violeta.*")];});

// lib/game/entities/Question.js
ig.baked=true;ig.module('game.entities.Question').requires('impact.entity','plugins.touch-button').defines(function(){EntityQuestion=ig.Entity.extend({name:'Question',size:{x:296,y:549},zIndex:999,animSheet:new ig.AnimationSheet('media/interrogante.jpg',296,549),init:function(x,y,settings){this.addAnim('idle',1,[0]);this.addAnim('smile',0.2,[1,0],true);this.parent(x,y,settings);var buttons=new ig.TouchButtonCollection([new ig.TouchButton('smile',{left:this.pos.x,top:this.pos.y},this.size.x,this.size.y),]);buttons.align();},update:function(){this.parent();if(ig.input.pressed('smile')){this.currentAnim=this.anims.smile.rewind();}}});});

// lib/game/levels/todos.js
ig.baked=true;ig.module('game.levels.todos').requires('impact.image','game.entities.Question').defines(function(){LevelTodos={"name":"LevelTodos","entities":[{"type":"EntityQuestion","x":632,"y":96}],"layer":[{"name":"fondo","width":4,"height":3,"linkWithCollision":false,"visible":true,"tilesetName":"media/fondo_todos.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,2,0,0],[3,4,0,0],[5,6,0,0]]},{"name":"fondo_blanco","width":4,"height":3,"linkWithCollision":false,"visible":true,"tilesetName":"media/blanco.png","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[0,0,1,1],[0,0,1,1],[0,0,1,1]]}]};LevelTodosResources=[new ig.Image('media/fondo_todos.jpg'),new ig.Image('media/blanco.png'),new ig.Sound("media/sp/Donde.*"),new ig.Sound("media/en/Donde.*"),new ig.Sound("media/gl/Donde.*")];});

// lib/game/levels/respuesta.js
ig.baked=true;ig.module('game.levels.respuesta').requires('impact.image').defines(function(){LevelRespuesta={"name":"LevelRespuesta","entities":[],"layer":[{"name":"fondo","width":4,"height":3,"linkWithCollision":false,"visible":true,"tilesetName":"media/fondo_arcoiris.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,2,3,4],[5,6,7,8],[9,10,11,12]]}]};LevelRespuestaResources=[new ig.Image('media/fondo_arcoiris.jpg'),new ig.Sound("media/sp/Arco Iris.*"),new ig.Sound("media/en/Arco Iris.*"),new ig.Sound("media/gl/Arco Iris.*")];});

// lib/game/levels/settings.js
ig.baked=true;ig.module('game.levels.settings').requires('impact.image').defines(function(){LevelSettings={"name":"LevelSettings","entities":[],"layer":[{"name":"background","width":4,"height":3,"linkWithCollision":false,"visible":1,"tilesetName":"media/fondo_settings.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,2,3,4],[5,6,7,8],[9,10,11,12]]}]};LevelSettingsResources=[new ig.Image('media/fondo_settings.jpg')];});

// lib/game/levels/juego.js
ig.baked=true;ig.module('game.levels.juego').requires('impact.image').defines(function(){LevelJuego={"name":"LevelJuego","entities":[],"layer":[]};});

// lib/game/levels/creditos.js
ig.baked=true;ig.module('game.levels.creditos').requires('impact.image').defines(function(){LevelCreditos={"name":"LevelCreditos","entities":[],"layer":[{"name":"fondo","width":4,"height":3,"linkWithCollision":false,"visible":true,"tilesetName":"media/fondo_settings.jpg","repeat":false,"preRender":false,"distance":"1","tilesize":256,"foreground":false,"data":[[1,2,3,4],[5,6,7,8],[9,10,11,12]]}]};LevelCreditosResources=[new ig.Image('media/fondo_settings.jpg')];});

// lib/plugins/check-touch-button.js
ig.baked=true;ig.module('plugins.check-touch-button').requires('plugins.touch-button').defines(function(){"use strict";ig.CheckTouchButton=ig.TouchButton.extend({tileChecked:0,tileNonChecked:1,checked:0,related_buttons:[],init:function(action,anchor,width,height,image,tileChecked,tileNonChecked,checked){this.tileChecked=tileChecked;this.tileNonChecked=tileNonChecked;this.checked=checked;this.parent(action,anchor,width,height,image,this.checked?tileChecked:tileNonChecked);},checkEnd:function(id){var res=this.parent(id);if(res){if(this.related_buttons.length>0){this.related_buttons.forEach(function(button){button.tile=button.tileNonChecked;button.checked=0;});this.checked=1;this.tile=this.tileChecked;}else{this.checked=!this.checked;this.tile=(this.checked)?this.tileChecked:this.tileNonChecked;}}
return res;},});});(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){"use strict";if(this==null){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1;}
var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!=0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}
if(n>=len){return-1;}
var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}
return-1;}}
if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(searchElement){"use strict";if(this==null){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;if(len===0){return-1;}
var n=len;if(arguments.length>1){n=Number(arguments[1]);if(n!=n){n=0;}else if(n!=0&&n!=(1/0)&&n!=-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n));}}
var k=n>=0?Math.min(n,len-1):len-Math.abs(n);for(;k>=0;k--){if(k in t&&t[k]===searchElement){return k;}}
return-1;};}
if(typeof String.prototype.trim!=='function'){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,'');}}
var root=this,$=root.jQuery||root.Zepto,i18n={},resStore={},currentLng,replacementCounter=0,languages=[],initialized=false;if(typeof module!=='undefined'&&module.exports){module.exports=i18n;}else{if($){$.i18n=$.i18n||i18n;}
root.i18n=root.i18n||i18n;}
var o={lng:undefined,load:'all',preload:[],lowerCaseLng:false,returnObjectTrees:false,fallbackLng:['dev'],fallbackNS:[],detectLngQS:'setLng',ns:'translation',fallbackOnNull:true,fallbackOnEmpty:false,fallbackToDefaultNS:false,nsseparator:':',keyseparator:'.',selectorAttr:'data-i18n',debug:false,resGetPath:'locales/__lng__/__ns__.json',resPostPath:'locales/add/__lng__/__ns__',getAsync:true,postAsync:true,resStore:undefined,useLocalStorage:false,localStorageExpirationTime:7*24*60*60*1000,dynamicLoad:false,sendMissing:false,sendMissingTo:'fallback',sendType:'POST',interpolationPrefix:'__',interpolationSuffix:'__',reusePrefix:'$t(',reuseSuffix:')',pluralSuffix:'_plural',pluralNotFound:['plural_not_found',Math.random()].join(''),contextNotFound:['context_not_found',Math.random()].join(''),escapeInterpolation:false,setJqueryExt:true,defaultValueFromContent:true,useDataAttrOptions:false,cookieExpirationTime:undefined,useCookie:true,cookieName:'i18next',cookieDomain:undefined,objectTreeKeyHandler:undefined,postProcess:undefined,parseMissingKey:undefined,shortcutFunction:'sprintf'};function _extend(target,source){if(!source||typeof source==='function'){return target;}
for(var attr in source){target[attr]=source[attr];}
return target;}
function _each(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||Object.prototype.toString.apply(object)!=='[object Array]'||typeof object==="function";if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(;i<length;){if(callback.call(object[i],i,object[i++])===false){break;}}}}
return object;}
var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;',"/":'&#x2F;'};function _escape(data){if(typeof data==='string'){return data.replace(/[&<>"'\/]/g,function(s){return _entityMap[s];});}else{return data;}}
function _ajax(options){var getXhr=function(callback){if(window.XMLHttpRequest){return callback(null,new XMLHttpRequest());}else if(window.ActiveXObject){try{return callback(null,new ActiveXObject("Msxml2.XMLHTTP"));}catch(e){return callback(null,new ActiveXObject("Microsoft.XMLHTTP"));}}
return callback(new Error());};var encodeUsingUrlEncoding=function(data){if(typeof data==='string'){return data;}
var result=[];for(var dataItem in data){if(data.hasOwnProperty(dataItem)){result.push(encodeURIComponent(dataItem)+'='+encodeURIComponent(data[dataItem]));}}
return result.join('&');};var utf8=function(text){text=text.replace(/\r\n/g,'\n');var result='';for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);if(c<128){result+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){result+=String.fromCharCode((c>>6)|192);result+=String.fromCharCode((c&63)|128);}else{result+=String.fromCharCode((c>>12)|224);result+=String.fromCharCode(((c>>6)&63)|128);result+=String.fromCharCode((c&63)|128);}}
return result;};var base64=function(text){var keyStr='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';text=utf8(text);var result='',chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0;do{chr1=text.charCodeAt(i++);chr2=text.charCodeAt(i++);chr3=text.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
result+=keyStr.charAt(enc1)+
keyStr.charAt(enc2)+
keyStr.charAt(enc3)+
keyStr.charAt(enc4);chr1=chr2=chr3='';enc1=enc2=enc3=enc4='';}while(i<text.length);return result;};var mergeHeaders=function(){var result=arguments[0];for(var i=1;i<arguments.length;i++){var currentHeaders=arguments[i];for(var header in currentHeaders){if(currentHeaders.hasOwnProperty(header)){result[header]=currentHeaders[header];}}}
return result;};var ajax=function(method,url,options,callback){if(typeof options==='function'){callback=options;options={};}
options.cache=options.cache||false;options.data=options.data||{};options.headers=options.headers||{};options.jsonp=options.jsonp||false;options.async=options.async===undefined?true:options.async;var headers=mergeHeaders({'accept':'*/*','content-type':'application/x-www-form-urlencoded;charset=UTF-8'},ajax.headers,options.headers);var payload;if(headers['content-type']==='application/json'){payload=JSON.stringify(options.data);}else{payload=encodeUsingUrlEncoding(options.data);}
if(method==='GET'){var queryString=[];if(payload){queryString.push(payload);payload=null;}
if(!options.cache){queryString.push('_='+(new Date()).getTime());}
if(options.jsonp){queryString.push('callback='+options.jsonp);queryString.push('jsonp='+options.jsonp);}
queryString=queryString.join('&');if(queryString.length>1){if(url.indexOf('?')>-1){url+='&'+queryString;}else{url+='?'+queryString;}}
if(options.jsonp){var head=document.getElementsByTagName('head')[0];var script=document.createElement('script');script.type='text/javascript';script.src=url;head.appendChild(script);return;}}
getXhr(function(err,xhr){if(err)return callback(err);xhr.open(method,url,options.async);for(var header in headers){if(headers.hasOwnProperty(header)){xhr.setRequestHeader(header,headers[header]);}}
xhr.onreadystatechange=function(){if(xhr.readyState===4){var data=xhr.responseText||'';if(!callback){return;}
callback(xhr.status,{text:function(){return data;},json:function(){return JSON.parse(data);}});}};xhr.send(payload);});};var http={authBasic:function(username,password){ajax.headers['Authorization']='Basic '+base64(username+':'+password);},connect:function(url,options,callback){return ajax('CONNECT',url,options,callback);},del:function(url,options,callback){return ajax('DELETE',url,options,callback);},get:function(url,options,callback){return ajax('GET',url,options,callback);},head:function(url,options,callback){return ajax('HEAD',url,options,callback);},headers:function(headers){ajax.headers=headers||{};},isAllowed:function(url,verb,callback){this.options(url,function(status,data){callback(data.text().indexOf(verb)!==-1);});},options:function(url,options,callback){return ajax('OPTIONS',url,options,callback);},patch:function(url,options,callback){return ajax('PATCH',url,options,callback);},post:function(url,options,callback){return ajax('POST',url,options,callback);},put:function(url,options,callback){return ajax('PUT',url,options,callback);},trace:function(url,options,callback){return ajax('TRACE',url,options,callback);}};var methode=options.type?options.type.toLowerCase():'get';http[methode](options.url,options,function(status,data){if(status===200){options.success(data.json(),status,null);}else{options.error(data.text(),status,null);}});}
var _cookie={create:function(name,value,minutes,domain){var expires;if(minutes){var date=new Date();date.setTime(date.getTime()+(minutes*60*1000));expires="; expires="+date.toGMTString();}
else expires="";domain=(domain)?"domain="+domain+";":"";document.cookie=name+"="+value+expires+";"+domain+"path=/";},read:function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length);}
return null;},remove:function(name){this.create(name,"",-1);}};var cookie_noop={create:function(name,value,minutes,domain){},read:function(name){return null;},remove:function(name){}};var f={extend:$?$.extend:_extend,each:$?$.each:_each,ajax:$?$.ajax:(typeof document!=='undefined'?_ajax:function(){}),cookie:typeof document!=='undefined'?_cookie:cookie_noop,detectLanguage:detectLanguage,escape:_escape,log:function(str){if(o.debug&&typeof console!=="undefined")console.log(str);},toLanguages:function(lng){var languages=[];if(typeof lng==='string'&&lng.indexOf('-')>-1){var parts=lng.split('-');lng=o.lowerCaseLng?parts[0].toLowerCase()+'-'+parts[1].toLowerCase():parts[0].toLowerCase()+'-'+parts[1].toUpperCase();if(o.load!=='unspecific')languages.push(lng);if(o.load!=='current')languages.push(parts[0]);}else{languages.push(lng);}
for(var i=0;i<o.fallbackLng.length;i++){if(languages.indexOf(o.fallbackLng[i])===-1&&o.fallbackLng[i])languages.push(o.fallbackLng[i]);}
return languages;},regexEscape:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");}};function init(options,cb){if(typeof options==='function'){cb=options;options={};}
options=options||{};f.extend(o,options);delete o.fixLng;if(typeof o.ns=='string'){o.ns={namespaces:[o.ns],defaultNs:o.ns};}
if(typeof o.fallbackNS=='string'){o.fallbackNS=[o.fallbackNS];}
if(typeof o.fallbackLng=='string'||typeof o.fallbackLng=='boolean'){o.fallbackLng=[o.fallbackLng];}
o.interpolationPrefixEscaped=f.regexEscape(o.interpolationPrefix);o.interpolationSuffixEscaped=f.regexEscape(o.interpolationSuffix);if(!o.lng)o.lng=f.detectLanguage();if(o.lng){if(o.useCookie)f.cookie.create(o.cookieName,o.lng,o.cookieExpirationTime,o.cookieDomain);}else{o.lng=o.fallbackLng[0];if(o.useCookie)f.cookie.remove(o.cookieName);}
languages=f.toLanguages(o.lng);currentLng=languages[0];f.log('currentLng set to: '+currentLng);var lngTranslate=translate;if(options.fixLng){lngTranslate=function(key,options){options=options||{};options.lng=options.lng||lngTranslate.lng;return translate(key,options);};lngTranslate.lng=currentLng;}
pluralExtensions.setCurrentLng(currentLng);if($&&o.setJqueryExt)addJqueryFunct();var deferred;if($&&$.Deferred){deferred=$.Deferred();}
if(o.resStore){resStore=o.resStore;initialized=true;if(cb)cb(lngTranslate);if(deferred)deferred.resolve(lngTranslate);if(deferred)return deferred.promise();return;}
var lngsToLoad=f.toLanguages(o.lng);if(typeof o.preload==='string')o.preload=[o.preload];for(var i=0,l=o.preload.length;i<l;i++){var pres=f.toLanguages(o.preload[i]);for(var y=0,len=pres.length;y<len;y++){if(lngsToLoad.indexOf(pres[y])<0){lngsToLoad.push(pres[y]);}}}
i18n.sync.load(lngsToLoad,o,function(err,store){resStore=store;initialized=true;if(cb)cb(lngTranslate);if(deferred)deferred.resolve(lngTranslate);});if(deferred)return deferred.promise();}
function preload(lngs,cb){if(typeof lngs==='string')lngs=[lngs];for(var i=0,l=lngs.length;i<l;i++){if(o.preload.indexOf(lngs[i])<0){o.preload.push(lngs[i]);}}
return init(cb);}
function addResourceBundle(lng,ns,resources){if(typeof ns!=='string'){resources=ns;ns=o.ns.defaultNs;}else if(o.ns.namespaces.indexOf(ns)<0){o.ns.namespaces.push(ns);}
resStore[lng]=resStore[lng]||{};resStore[lng][ns]=resStore[lng][ns]||{};f.extend(resStore[lng][ns],resources);}
function removeResourceBundle(lng,ns){if(typeof ns!=='string'){ns=o.ns.defaultNs;}
resStore[lng]=resStore[lng]||{};resStore[lng][ns]={};}
function setDefaultNamespace(ns){o.ns.defaultNs=ns;}
function loadNamespace(namespace,cb){loadNamespaces([namespace],cb);}
function loadNamespaces(namespaces,cb){var opts={dynamicLoad:o.dynamicLoad,resGetPath:o.resGetPath,getAsync:o.getAsync,customLoad:o.customLoad,ns:{namespaces:namespaces,defaultNs:''}};var lngsToLoad=f.toLanguages(o.lng);if(typeof o.preload==='string')o.preload=[o.preload];for(var i=0,l=o.preload.length;i<l;i++){var pres=f.toLanguages(o.preload[i]);for(var y=0,len=pres.length;y<len;y++){if(lngsToLoad.indexOf(pres[y])<0){lngsToLoad.push(pres[y]);}}}
var lngNeedLoad=[];for(var a=0,lenA=lngsToLoad.length;a<lenA;a++){var needLoad=false;var resSet=resStore[lngsToLoad[a]];if(resSet){for(var b=0,lenB=namespaces.length;b<lenB;b++){if(!resSet[namespaces[b]])needLoad=true;}}else{needLoad=true;}
if(needLoad)lngNeedLoad.push(lngsToLoad[a]);}
if(lngNeedLoad.length){i18n.sync._fetch(lngNeedLoad,opts,function(err,store){var todo=namespaces.length*lngNeedLoad.length;f.each(namespaces,function(nsIndex,nsValue){if(o.ns.namespaces.indexOf(nsValue)<0){o.ns.namespaces.push(nsValue);}
f.each(lngNeedLoad,function(lngIndex,lngValue){resStore[lngValue]=resStore[lngValue]||{};resStore[lngValue][nsValue]=store[lngValue][nsValue];todo--;if(todo===0&&cb){if(o.useLocalStorage)i18n.sync._storeLocal(resStore);cb();}});});});}else{if(cb)cb();}}
function setLng(lng,options,cb){if(typeof options==='function'){cb=options;options={};}else if(!options){options={};}
options.lng=lng;return init(options,cb);}
function lng(){return currentLng;}
function addJqueryFunct(){$.t=$.t||translate;function parse(ele,key,options){if(key.length===0)return;var attr='text';if(key.indexOf('[')===0){var parts=key.split(']');key=parts[1];attr=parts[0].substr(1,parts[0].length-1);}
if(key.indexOf(';')===key.length-1){key=key.substr(0,key.length-2);}
var optionsToUse;if(attr==='html'){optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.html()},options):options;ele.html($.t(key,optionsToUse));}else if(attr==='text'){optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.text()},options):options;ele.text($.t(key,optionsToUse));}else if(attr==='prepend'){optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.html()},options):options;ele.prepend($.t(key,optionsToUse));}else if(attr==='append'){optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.html()},options):options;ele.append($.t(key,optionsToUse));}else if(attr.indexOf("data-")===0){var dataAttr=attr.substr(("data-").length);optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.data(dataAttr)},options):options;var translated=$.t(key,optionsToUse);ele.data(dataAttr,translated);ele.attr(attr,translated);}else{optionsToUse=o.defaultValueFromContent?$.extend({defaultValue:ele.attr(attr)},options):options;ele.attr(attr,$.t(key,optionsToUse));}}
function localize(ele,options){var key=ele.attr(o.selectorAttr);if(!key&&typeof key!=='undefined'&&key!==false)key=ele.text()||ele.val();if(!key)return;var target=ele,targetSelector=ele.data("i18n-target");if(targetSelector){target=ele.find(targetSelector)||ele;}
if(!options&&o.useDataAttrOptions===true){options=ele.data("i18n-options");}
options=options||{};if(key.indexOf(';')>=0){var keys=key.split(';');$.each(keys,function(m,k){if(k!=='')parse(target,k,options);});}else{parse(target,key,options);}
if(o.useDataAttrOptions===true)ele.data("i18n-options",options);}
$.fn.i18n=function(options){return this.each(function(){localize($(this),options);var elements=$(this).find('['+o.selectorAttr+']');elements.each(function(){localize($(this),options);});});};}
function applyReplacement(str,replacementHash,nestedKey,options){if(!str)return str;options=options||replacementHash;if(str.indexOf(options.interpolationPrefix||o.interpolationPrefix)<0)return str;var prefix=options.interpolationPrefix?f.regexEscape(options.interpolationPrefix):o.interpolationPrefixEscaped,suffix=options.interpolationSuffix?f.regexEscape(options.interpolationSuffix):o.interpolationSuffixEscaped,unEscapingSuffix='HTML'+suffix;f.each(replacementHash,function(key,value){var nextKey=nestedKey?nestedKey+o.keyseparator+key:key;if(typeof value==='object'&&value!==null){str=applyReplacement(str,value,nextKey,options);}else{if(options.escapeInterpolation||o.escapeInterpolation){str=str.replace(new RegExp([prefix,nextKey,unEscapingSuffix].join(''),'g'),value);str=str.replace(new RegExp([prefix,nextKey,suffix].join(''),'g'),f.escape(value));}else{str=str.replace(new RegExp([prefix,nextKey,suffix].join(''),'g'),value);}}});return str;}
f.applyReplacement=applyReplacement;function applyReuse(translated,options){var comma=',';var options_open='{';var options_close='}';var opts=f.extend({},options);delete opts.postProcess;while(translated.indexOf(o.reusePrefix)!=-1){replacementCounter++;if(replacementCounter>o.maxRecursion){break;}
var index_of_opening=translated.lastIndexOf(o.reusePrefix);var index_of_end_of_closing=translated.indexOf(o.reuseSuffix,index_of_opening)+o.reuseSuffix.length;var token=translated.substring(index_of_opening,index_of_end_of_closing);var token_without_symbols=token.replace(o.reusePrefix,'').replace(o.reuseSuffix,'');if(token_without_symbols.indexOf(comma)!=-1){var index_of_token_end_of_closing=token_without_symbols.indexOf(comma);if(token_without_symbols.indexOf(options_open,index_of_token_end_of_closing)!=-1&&token_without_symbols.indexOf(options_close,index_of_token_end_of_closing)!=-1){var index_of_opts_opening=token_without_symbols.indexOf(options_open,index_of_token_end_of_closing);var index_of_opts_end_of_closing=token_without_symbols.indexOf(options_close,index_of_opts_opening)+options_close.length;try{opts=f.extend(opts,JSON.parse(token_without_symbols.substring(index_of_opts_opening,index_of_opts_end_of_closing)));token_without_symbols=token_without_symbols.substring(0,index_of_token_end_of_closing);}catch(e){}}}
var translated_token=_translate(token_without_symbols,opts);translated=translated.replace(token,translated_token);}
return translated;}
function hasContext(options){return(options.context&&(typeof options.context=='string'||typeof options.context=='number'));}
function needsPlural(options){return(options.count!==undefined&&typeof options.count!='string'&&options.count!==1);}
function exists(key,options){options=options||{};var notFound=_getDefaultValue(key,options),found=_find(key,options);return found!==undefined||found===notFound;}
function translate(key,options){options=options||{};if(!initialized){f.log('i18next not finished initialization. you might have called t function before loading resources finished.')
return options.defaultValue||'';};replacementCounter=0;return _translate.apply(null,arguments);}
function _getDefaultValue(key,options){return(options.defaultValue!==undefined)?options.defaultValue:key;}
function _injectSprintfProcessor(){var values=[];for(var i=1;i<arguments.length;i++){values.push(arguments[i]);}
return{postProcess:'sprintf',sprintf:values};}
function _translate(potentialKeys,options){if(options&&typeof options!=='object'){if(o.shortcutFunction==='sprintf'){options=_injectSprintfProcessor.apply(null,arguments);}else if(o.shortcutFunction==='defaultValue'){options={defaultValue:options}}}else{options=options||{};}
if(potentialKeys===undefined||potentialKeys===null)return'';if(typeof potentialKeys=='string'){potentialKeys=[potentialKeys];}
var key=potentialKeys[0];if(potentialKeys.length>1){for(var i=0;i<potentialKeys.length;i++){key=potentialKeys[i];if(exists(key,options)){break;}}}
var notFound=_getDefaultValue(key,options),found=_find(key,options),lngs=options.lng?f.toLanguages(options.lng):languages,ns=options.ns||o.ns.defaultNs,parts;if(key.indexOf(o.nsseparator)>-1){parts=key.split(o.nsseparator);ns=parts[0];key=parts[1];}
if(found===undefined&&o.sendMissing){if(options.lng){sync.postMissing(lngs[0],ns,key,notFound,lngs);}else{sync.postMissing(o.lng,ns,key,notFound,lngs);}}
var postProcessor=options.postProcess||o.postProcess;if(found!==undefined&&postProcessor){if(postProcessors[postProcessor]){found=postProcessors[postProcessor](found,key,options);}}
var splitNotFound=notFound;if(notFound.indexOf(o.nsseparator)>-1){parts=notFound.split(o.nsseparator);splitNotFound=parts[1];}
if(splitNotFound===key&&o.parseMissingKey){notFound=o.parseMissingKey(notFound);}
if(found===undefined){notFound=applyReplacement(notFound,options);notFound=applyReuse(notFound,options);if(postProcessor&&postProcessors[postProcessor]){var val=_getDefaultValue(key,options);found=postProcessors[postProcessor](val,key,options);}}
return(found!==undefined)?found:notFound;}
function _find(key,options){options=options||{};var optionWithoutCount,translated,notFound=_getDefaultValue(key,options),lngs=languages;if(!resStore){return notFound;}
if(lngs[0].toLowerCase()==='cimode')return notFound;if(options.lng){lngs=f.toLanguages(options.lng);if(!resStore[lngs[0]]){var oldAsync=o.getAsync;o.getAsync=false;i18n.sync.load(lngs,o,function(err,store){f.extend(resStore,store);o.getAsync=oldAsync;});}}
var ns=options.ns||o.ns.defaultNs;if(key.indexOf(o.nsseparator)>-1){var parts=key.split(o.nsseparator);ns=parts[0];key=parts[1];}
if(hasContext(options)){optionWithoutCount=f.extend({},options);delete optionWithoutCount.context;optionWithoutCount.defaultValue=o.contextNotFound;var contextKey=ns+o.nsseparator+key+'_'+options.context;translated=translate(contextKey,optionWithoutCount);if(translated!=o.contextNotFound){return applyReplacement(translated,{context:options.context});}}
if(needsPlural(options)){optionWithoutCount=f.extend({},options);delete optionWithoutCount.count;optionWithoutCount.defaultValue=o.pluralNotFound;var pluralKey=ns+o.nsseparator+key+o.pluralSuffix;var pluralExtension=pluralExtensions.get(lngs[0],options.count);if(pluralExtension>=0){pluralKey=pluralKey+'_'+pluralExtension;}else if(pluralExtension===1){pluralKey=ns+o.nsseparator+key;}
translated=translate(pluralKey,optionWithoutCount);if(translated!=o.pluralNotFound){return applyReplacement(translated,{count:options.count,interpolationPrefix:options.interpolationPrefix,interpolationSuffix:options.interpolationSuffix});}}
var found;var keys=key.split(o.keyseparator);for(var i=0,len=lngs.length;i<len;i++){if(found!==undefined)break;var l=lngs[i];var x=0;var value=resStore[l]&&resStore[l][ns];while(keys[x]){value=value&&value[keys[x]];x++;}
if(value!==undefined){var valueType=Object.prototype.toString.apply(value);if(typeof value==='string'){value=applyReplacement(value,options);value=applyReuse(value,options);}else if(valueType==='[object Array]'&&!o.returnObjectTrees&&!options.returnObjectTrees){value=value.join('\n');value=applyReplacement(value,options);value=applyReuse(value,options);}else if(value===null&&o.fallbackOnNull===true){value=undefined;}else if(value!==null){if(!o.returnObjectTrees&&!options.returnObjectTrees){if(o.objectTreeKeyHandler&&typeof o.objectTreeKeyHandler=='function'){value=o.objectTreeKeyHandler(key,value,l,ns,options);}else{value='key \''+ns+':'+key+' ('+l+')\' '+'returned an object instead of string.';f.log(value);}}else if(valueType!=='[object Number]'&&valueType!=='[object Function]'&&valueType!=='[object RegExp]'){var copy=(valueType==='[object Array]')?[]:{};f.each(value,function(m){copy[m]=_translate(ns+o.nsseparator+key+o.keyseparator+m,options);});value=copy;}}
if(typeof value==='string'&&value.trim()===''&&o.fallbackOnEmpty===true)
value=undefined;found=value;}}
if(found===undefined&&!options.isFallbackLookup&&(o.fallbackToDefaultNS===true||(o.fallbackNS&&o.fallbackNS.length>0))){options.isFallbackLookup=true;if(o.fallbackNS.length){for(var y=0,lenY=o.fallbackNS.length;y<lenY;y++){found=_find(o.fallbackNS[y]+o.nsseparator+key,options);if(found){var foundValue=found.indexOf(o.nsseparator)>-1?found.split(o.nsseparator)[1]:found,notFoundValue=notFound.indexOf(o.nsseparator)>-1?notFound.split(o.nsseparator)[1]:notFound;if(foundValue!==notFoundValue)break;}}}else{found=_find(key,options);}}
return found;}
function detectLanguage(){var detectedLng;var qsParm=[];if(typeof window!=='undefined'){(function(){var query=window.location.search.substring(1);var parms=query.split('&');for(var i=0;i<parms.length;i++){var pos=parms[i].indexOf('=');if(pos>0){var key=parms[i].substring(0,pos);var val=parms[i].substring(pos+1);qsParm[key]=val;}}})();if(qsParm[o.detectLngQS]){detectedLng=qsParm[o.detectLngQS];}}
if(!detectedLng&&typeof document!=='undefined'&&o.useCookie){var c=f.cookie.read(o.cookieName);if(c)detectedLng=c;}
if(!detectedLng&&typeof navigator!=='undefined'){detectedLng=(navigator.language)?navigator.language:navigator.userLanguage;}
return detectedLng;}
var sync={load:function(lngs,options,cb){if(options.useLocalStorage){sync._loadLocal(lngs,options,function(err,store){var missingLngs=[];for(var i=0,len=lngs.length;i<len;i++){if(!store[lngs[i]])missingLngs.push(lngs[i]);}
if(missingLngs.length>0){sync._fetch(missingLngs,options,function(err,fetched){f.extend(store,fetched);sync._storeLocal(fetched);cb(null,store);});}else{cb(null,store);}});}else{sync._fetch(lngs,options,function(err,store){cb(null,store);});}},_loadLocal:function(lngs,options,cb){var store={},nowMS=new Date().getTime();if(window.localStorage){var todo=lngs.length;f.each(lngs,function(key,lng){var local=window.localStorage.getItem('res_'+lng);if(local){local=JSON.parse(local);if(local.i18nStamp&&local.i18nStamp+options.localStorageExpirationTime>nowMS){store[lng]=local;}}
todo--;if(todo===0)cb(null,store);});}},_storeLocal:function(store){if(window.localStorage){for(var m in store){store[m].i18nStamp=new Date().getTime();window.localStorage.setItem('res_'+m,JSON.stringify(store[m]));}}
return;},_fetch:function(lngs,options,cb){var ns=options.ns,store={};if(!options.dynamicLoad){var todo=ns.namespaces.length*lngs.length,errors;f.each(ns.namespaces,function(nsIndex,nsValue){f.each(lngs,function(lngIndex,lngValue){var loadComplete=function(err,data){if(err){errors=errors||[];errors.push(err);}
store[lngValue]=store[lngValue]||{};store[lngValue][nsValue]=data;todo--;if(todo===0)cb(errors,store);};if(typeof options.customLoad=='function'){options.customLoad(lngValue,nsValue,options,loadComplete);}else{sync._fetchOne(lngValue,nsValue,options,loadComplete);}});});}else{var loadComplete=function(err,data){cb(null,data);};if(typeof options.customLoad=='function'){options.customLoad(lngs,ns.namespaces,options,loadComplete);}else{var url=applyReplacement(options.resGetPath,{lng:lngs.join('+'),ns:ns.namespaces.join('+')});f.ajax({url:url,success:function(data,status,xhr){f.log('loaded: '+url);loadComplete(null,data);},error:function(xhr,status,error){f.log('failed loading: '+url);loadComplete('failed loading resource.json error: '+error);},dataType:"json",async:options.getAsync});}}},_fetchOne:function(lng,ns,options,done){var url=applyReplacement(options.resGetPath,{lng:lng,ns:ns});f.ajax({url:url,success:function(data,status,xhr){f.log('loaded: '+url);done(null,data);},error:function(xhr,status,error){if((status&&status==200)||(xhr&&xhr.status&&xhr.status==200)){f.log('There is a typo in: '+url);}else if((status&&status==404)||(xhr&&xhr.status&&xhr.status==404)){f.log('Does not exist: '+url);}else{var theStatus=status?status:((xhr&&xhr.status)?xhr.status:null);f.log(theStatus+' when loading '+url);}
done(error,{});},dataType:"json",async:options.getAsync});},postMissing:function(lng,ns,key,defaultValue,lngs){var payload={};payload[key]=defaultValue;var urls=[];if(o.sendMissingTo==='fallback'&&o.fallbackLng[0]!==false){for(var i=0;i<o.fallbackLng.length;i++){urls.push({lng:o.fallbackLng[i],url:applyReplacement(o.resPostPath,{lng:o.fallbackLng[i],ns:ns})});}}else if(o.sendMissingTo==='current'||(o.sendMissingTo==='fallback'&&o.fallbackLng[0]===false)){urls.push({lng:lng,url:applyReplacement(o.resPostPath,{lng:lng,ns:ns})});}else if(o.sendMissingTo==='all'){for(var i=0,l=lngs.length;i<l;i++){urls.push({lng:lngs[i],url:applyReplacement(o.resPostPath,{lng:lngs[i],ns:ns})});}}
for(var y=0,len=urls.length;y<len;y++){var item=urls[y];f.ajax({url:item.url,type:o.sendType,data:payload,success:function(data,status,xhr){f.log('posted missing key \''+key+'\' to: '+item.url);var keys=key.split('.');var x=0;var value=resStore[item.lng][ns];while(keys[x]){if(x===keys.length-1){value=value[keys[x]]=defaultValue;}else{value=value[keys[x]]=value[keys[x]]||{};}
x++;}},error:function(xhr,status,error){f.log('failed posting missing key \''+key+'\' to: '+item.url);},dataType:"json",async:o.postAsync});}}};var pluralExtensions={rules:{"ach":{"name":"Acholi","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"af":{"name":"Afrikaans","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ak":{"name":"Akan","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"am":{"name":"Amharic","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"an":{"name":"Aragonese","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ar":{"name":"Arabic","numbers":[0,1,2,3,11,100],"plurals":function(n){return Number(n===0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5);}},"arn":{"name":"Mapudungun","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"ast":{"name":"Asturian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ay":{"name":"Aymar\u00e1","numbers":[1],"plurals":function(n){return 0;}},"az":{"name":"Azerbaijani","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"be":{"name":"Belarusian","numbers":[1,2,5],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"bg":{"name":"Bulgarian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"bn":{"name":"Bengali","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"bo":{"name":"Tibetan","numbers":[1],"plurals":function(n){return 0;}},"br":{"name":"Breton","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"bs":{"name":"Bosnian","numbers":[1,2,5],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"ca":{"name":"Catalan","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"cgg":{"name":"Chiga","numbers":[1],"plurals":function(n){return 0;}},"cs":{"name":"Czech","numbers":[1,2,5],"plurals":function(n){return Number((n==1)?0:(n>=2&&n<=4)?1:2);}},"csb":{"name":"Kashubian","numbers":[1,2,5],"plurals":function(n){return Number(n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"cy":{"name":"Welsh","numbers":[1,2,3,8],"plurals":function(n){return Number((n==1)?0:(n==2)?1:(n!=8&&n!=11)?2:3);}},"da":{"name":"Danish","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"de":{"name":"German","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"dz":{"name":"Dzongkha","numbers":[1],"plurals":function(n){return 0;}},"el":{"name":"Greek","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"en":{"name":"English","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"eo":{"name":"Esperanto","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"es":{"name":"Spanish","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"es_ar":{"name":"Argentinean Spanish","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"et":{"name":"Estonian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"eu":{"name":"Basque","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"fa":{"name":"Persian","numbers":[1],"plurals":function(n){return 0;}},"fi":{"name":"Finnish","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"fil":{"name":"Filipino","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"fo":{"name":"Faroese","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"fr":{"name":"French","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"fur":{"name":"Friulian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"fy":{"name":"Frisian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ga":{"name":"Irish","numbers":[1,2,3,7,11],"plurals":function(n){return Number(n==1?0:n==2?1:n<7?2:n<11?3:4);}},"gd":{"name":"Scottish Gaelic","numbers":[1,2,3,20],"plurals":function(n){return Number((n==1||n==11)?0:(n==2||n==12)?1:(n>2&&n<20)?2:3);}},"gl":{"name":"Galician","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"gu":{"name":"Gujarati","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"gun":{"name":"Gun","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"ha":{"name":"Hausa","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"he":{"name":"Hebrew","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"hi":{"name":"Hindi","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"hr":{"name":"Croatian","numbers":[1,2,5],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"hu":{"name":"Hungarian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"hy":{"name":"Armenian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ia":{"name":"Interlingua","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"id":{"name":"Indonesian","numbers":[1],"plurals":function(n){return 0;}},"is":{"name":"Icelandic","numbers":[1,2],"plurals":function(n){return Number(n%10!=1||n%100==11);}},"it":{"name":"Italian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ja":{"name":"Japanese","numbers":[1],"plurals":function(n){return 0;}},"jbo":{"name":"Lojban","numbers":[1],"plurals":function(n){return 0;}},"jv":{"name":"Javanese","numbers":[0,1],"plurals":function(n){return Number(n!==0);}},"ka":{"name":"Georgian","numbers":[1],"plurals":function(n){return 0;}},"kk":{"name":"Kazakh","numbers":[1],"plurals":function(n){return 0;}},"km":{"name":"Khmer","numbers":[1],"plurals":function(n){return 0;}},"kn":{"name":"Kannada","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ko":{"name":"Korean","numbers":[1],"plurals":function(n){return 0;}},"ku":{"name":"Kurdish","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"kw":{"name":"Cornish","numbers":[1,2,3,4],"plurals":function(n){return Number((n==1)?0:(n==2)?1:(n==3)?2:3);}},"ky":{"name":"Kyrgyz","numbers":[1],"plurals":function(n){return 0;}},"lb":{"name":"Letzeburgesch","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ln":{"name":"Lingala","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"lo":{"name":"Lao","numbers":[1],"plurals":function(n){return 0;}},"lt":{"name":"Lithuanian","numbers":[1,2,10],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2);}},"lv":{"name":"Latvian","numbers":[1,2,0],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n!==0?1:2);}},"mai":{"name":"Maithili","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"mfe":{"name":"Mauritian Creole","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"mg":{"name":"Malagasy","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"mi":{"name":"Maori","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"mk":{"name":"Macedonian","numbers":[1,2],"plurals":function(n){return Number(n==1||n%10==1?0:1);}},"ml":{"name":"Malayalam","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"mn":{"name":"Mongolian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"mnk":{"name":"Mandinka","numbers":[0,1,2],"plurals":function(n){return Number(0?0:n==1?1:2);}},"mr":{"name":"Marathi","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ms":{"name":"Malay","numbers":[1],"plurals":function(n){return 0;}},"mt":{"name":"Maltese","numbers":[1,2,11,20],"plurals":function(n){return Number(n==1?0:n===0||(n%100>1&&n%100<11)?1:(n%100>10&&n%100<20)?2:3);}},"nah":{"name":"Nahuatl","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"nap":{"name":"Neapolitan","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"nb":{"name":"Norwegian Bokmal","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ne":{"name":"Nepali","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"nl":{"name":"Dutch","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"nn":{"name":"Norwegian Nynorsk","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"no":{"name":"Norwegian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"nso":{"name":"Northern Sotho","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"oc":{"name":"Occitan","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"or":{"name":"Oriya","numbers":[2,1],"plurals":function(n){return Number(n!=1);}},"pa":{"name":"Punjabi","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"pap":{"name":"Papiamento","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"pl":{"name":"Polish","numbers":[1,2,5],"plurals":function(n){return Number(n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"pms":{"name":"Piemontese","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ps":{"name":"Pashto","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"pt":{"name":"Portuguese","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"pt_br":{"name":"Brazilian Portuguese","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"rm":{"name":"Romansh","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ro":{"name":"Romanian","numbers":[1,2,20],"plurals":function(n){return Number(n==1?0:(n===0||(n%100>0&&n%100<20))?1:2);}},"ru":{"name":"Russian","numbers":[1,2,5],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"sah":{"name":"Yakut","numbers":[1],"plurals":function(n){return 0;}},"sco":{"name":"Scots","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"se":{"name":"Northern Sami","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"si":{"name":"Sinhala","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"sk":{"name":"Slovak","numbers":[1,2,5],"plurals":function(n){return Number((n==1)?0:(n>=2&&n<=4)?1:2);}},"sl":{"name":"Slovenian","numbers":[5,1,2,3],"plurals":function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0);}},"so":{"name":"Somali","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"son":{"name":"Songhay","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"sq":{"name":"Albanian","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"sr":{"name":"Serbian","numbers":[1,2,5],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"su":{"name":"Sundanese","numbers":[1],"plurals":function(n){return 0;}},"sv":{"name":"Swedish","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"sw":{"name":"Swahili","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"ta":{"name":"Tamil","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"te":{"name":"Telugu","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"tg":{"name":"Tajik","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"th":{"name":"Thai","numbers":[1],"plurals":function(n){return 0;}},"ti":{"name":"Tigrinya","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"tk":{"name":"Turkmen","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"tr":{"name":"Turkish","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"tt":{"name":"Tatar","numbers":[1],"plurals":function(n){return 0;}},"ug":{"name":"Uyghur","numbers":[1],"plurals":function(n){return 0;}},"uk":{"name":"Ukrainian","numbers":[1,2,5],"plurals":function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2);}},"ur":{"name":"Urdu","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"uz":{"name":"Uzbek","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"vi":{"name":"Vietnamese","numbers":[1],"plurals":function(n){return 0;}},"wa":{"name":"Walloon","numbers":[1,2],"plurals":function(n){return Number(n>1);}},"wo":{"name":"Wolof","numbers":[1],"plurals":function(n){return 0;}},"yo":{"name":"Yoruba","numbers":[1,2],"plurals":function(n){return Number(n!=1);}},"zh":{"name":"Chinese","numbers":[1],"plurals":function(n){return 0;}}},addRule:function(lng,obj){pluralExtensions.rules[lng]=obj;},setCurrentLng:function(lng){if(!pluralExtensions.currentRule||pluralExtensions.currentRule.lng!==lng){var parts=lng.split('-');pluralExtensions.currentRule={lng:lng,rule:pluralExtensions.rules[parts[0]]};}},get:function(lng,count){var parts=lng.split('-');function getResult(l,c){var ext;if(pluralExtensions.currentRule&&pluralExtensions.currentRule.lng===lng){ext=pluralExtensions.currentRule.rule;}else{ext=pluralExtensions.rules[l];}
if(ext){var i=ext.plurals(c);var number=ext.numbers[i];if(ext.numbers.length===2&&ext.numbers[0]===1){if(number===2){number=-1;}else if(number===1){number=1;}}
return number;}else{return c===1?'1':'-1';}}
return getResult(parts[0],count);}};var postProcessors={};var addPostProcessor=function(name,fc){postProcessors[name]=fc;};var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase();}
function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}
return output.join('');}
var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0]);}
return str_format.format.call(null,str_format.cache[arguments[0]],arguments);};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output.push(parse_tree[i]);}
else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw(sprintf('[sprintf] property "%s" does not exist',match[2][k]));}
arg=arg[match[2][k]];}}
else if(match[1]){arg=argv[match[1]];}
else{arg=argv[cursor++];}
if(/[^s]/.test(match[8])&&(get_type(arg)!='number')){throw(sprintf('[sprintf] expecting number but found %s',get_type(arg)));}
switch(match[8]){case'b':arg=arg.toString(2);break;case'c':arg=String.fromCharCode(arg);break;case'd':arg=parseInt(arg,10);break;case'e':arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'o':arg=arg.toString(8);break;case's':arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case'u':arg=Math.abs(arg);break;case'x':arg=arg.toString(16);break;case'X':arg=arg.toString(16).toUpperCase();break;}
arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?'+'+arg:arg);pad_character=match[4]?match[4]=='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):'';output.push(match[5]?arg+pad:pad+arg);}}
return output.join('');};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0]);}
else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push('%');}
else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);}
else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1]);}
else{throw('[sprintf] huh?');}}}
else{throw('[sprintf] huh?');}
match[2]=field_list;}
else{arg_names|=2;}
if(arg_names===3){throw('[sprintf] mixing positional and named placeholders is not (yet) supported');}
parse_tree.push(match);}
else{throw('[sprintf] huh?');}
_fmt=_fmt.substring(match[0].length);}
return parse_tree;};return str_format;})();var vsprintf=function(fmt,argv){argv.unshift(fmt);return sprintf.apply(null,argv);};addPostProcessor("sprintf",function(val,key,opts){if(!opts.sprintf)return val;if(Object.prototype.toString.apply(opts.sprintf)==='[object Array]'){return vsprintf(val,opts.sprintf);}else if(typeof opts.sprintf==='object'){return sprintf(val,opts.sprintf);}
return val;});i18n.init=init;i18n.setLng=setLng;i18n.preload=preload;i18n.addResourceBundle=addResourceBundle;i18n.removeResourceBundle=removeResourceBundle;i18n.loadNamespace=loadNamespace;i18n.loadNamespaces=loadNamespaces;i18n.setDefaultNamespace=setDefaultNamespace;i18n.t=translate;i18n.translate=translate;i18n.exists=exists;i18n.detectLanguage=f.detectLanguage;i18n.pluralExtensions=pluralExtensions;i18n.sync=sync;i18n.functions=f;i18n.lng=lng;i18n.addPostProcessor=addPostProcessor;i18n.options=o;})();

// lib/plugins/i18n.js
ig.baked=true;ig.module('plugins.i18n').defines(function(){i18n.languages={galician:'gl',spanish:'es',english:'en'};});

// lib/plugins/locales.js
ig.baked=true;ig.module('plugins.locales').defines(function(){ig.locales={'es':{translation:{"LevelRojo":{"presentacion":"¡Hola! Yo soy el color Rojo.","frase":"Puedes encontrarme en comida tan rica...\n¡como las fresas! ¡Mmm!","audio":"sp/Rojo.*"},"LevelNaranja":{"presentacion":"Pues yo me llamo Naranja.","frase":"Soy tan famoso\nque hasta una fruta lleva mi nombre.","audio":"sp/Naranja.*"},"LevelAmarillo":{"presentacion":"¡Aquí estoy!\nSoy el color Amarillo.","frase":"Fíjate cómo salgo\nde los rayos del sol.","audio":"sp/Amarillo.*"},"LevelGreen":{"presentacion":"Yo soy el color Verde.","frase":"Estoy en la hierba y en las hojas.\n¡La naturaleza es lo mío!","audio":"sp/Verde.*"},"LevelAzul":{"presentacion":"A mí todos me llaman Azul.","frase":"¡Y ocupo toooodo el cielo!","audio":"sp/Azul.*"},"LevelAnil":{"presentacion":"Me presentaré:\nSoy el color Añil.","frase":"¡Puedes encontrarme bailando\ncon los peces entre las olas del mar!","audio":"sp/Anil.*"},"LevelVioleta":{"presentacion":"A mí me conocen como Violeta.","frase":"Y soy tan delicada que he cedido\nmi nombre a estas bonitas flores.","audio":"sp/Violeta.*"},"LevelTodos":{"amigos":"¡Somos grandes amigos y por eso\nnos puedes encontrar mezclados\ny en grupos!","pregunta":"Pero...\n¿Sabes dónde puedes encontrarnos\na todos juntos?","audio":"sp/Donde.*"},"LevelRespuesta":{"correcto":"¡Eso es!\n¡En el Arco Iris!","audio":"sp/Arco Iris.*"},"LevelSettings":{"titulo":"Configuración","idioma":"Idioma","sonido":"Sonido","narracion":"Narración","musica":"Música","aceptar":"Aceptar","cancelar":"Cancelar"},"Home":{"titulo":"¡Colores!","subtitulo":"Un libro infantil interactivo","prefrencias":"Preferencias","info":"Sobre este libro","comenzar":"Empezar a leer..."},"Juego":{"titulo":"¿Estás inspirado? Dibuja con nosotros.","compartir":"¡Y compártelo!"},"ParentalGate":{"titulo":"¡Oh oh!\nEsto es para mayores.","subtitulo":"Para continuar, por favor, selecciona la respuesta correcta\na esta operación para demostrar que eres un adulto:","audio":"sp/Parental.*"},"dibujar":"Dibujar","inicio":"Inicio","david":"Programación.\nHaciendo que las\ncosas se muevan.","carlos":"Guión original\ne ilustraciones","irene":"Adaptación guión,\ntraducciones y voces","musica":"Ally Calvine - Ukelele Fun"},},'gl':{translation:{"LevelRojo":{"presentacion":"Ola! Eu son a cor Vermella.","frase":"Podes atoparme en comida tan rica...\ncomo os amorodos! Mmm!","audio":"gl/Rojo.*"},"LevelNaranja":{"presentacion":"Pois eu chámome Laranxa.","frase":"Sonche tan famosa\nque ata unha froita leva o meu nome.","audio":"gl/Naranja.*"},"LevelAmarillo":{"presentacion":"Velaquí estou!\nSon a cor Amarela.","frase":"Mira como saio\ndos raios do sol.","audio":"gl/Amarillo.*"},"LevelGreen":{"presentacion":"Eu son a cor Verde.","frase":"Estou na herba e nas follas.\nA natureza é o meu!","audio":"gl/Verde.*"},"LevelAzul":{"presentacion":"A min chámanme todos Azul.","frase":"E ocupo toooodo o ceo!","audio":"gl/Azul.*"},"LevelAnil":{"presentacion":"Voume presentar:\nSon a cor Anil.","frase":"Pódesme atopar bailando cos peixes\nentre as ondas do mar!","audio":"gl/Anil.*"},"LevelVioleta":{"presentacion":"A min coñécenme como Violeta.","frase":"E son tan delicada que cedín\no meu nome a estas bonitas flores.","audio":"gl/Violeta.*"},"LevelTodos":{"amigos":"Somos moi amigos e por iso\npódesnos atopar\nmesturados e en grupos!","pregunta":"Pero...\nSabes onde nos podes\natopar a todos xuntos?","audio":"gl/Donde.*"},"LevelRespuesta":{"correcto":"Iso é!\nNo Arco da Vella!","audio":"gl/Arco Iris.*"},"LevelSettings":{"titulo":"Configuración","idioma":"Idioma","sonido":"Sonido","narracion":"Narración","musica":"Música","aceptar":"Aceptar","cancelar":"Cancelar"},"Home":{"titulo":"Cores!","subtitulo":"Un libro infantil interactivo","prefrencias":"Preferencias","info":"Sobre este libro","comenzar":"Comezar a ler..."},"Juego":{"titulo":"Estás inspirado? Debuxa connosco.","compartir":" E compárteo!"},"ParentalGate":{"titulo":"Oh oh!\nIsto é para maiores.","subtitulo":"Para continuar, por favor, selecciona a resposta correcta\na esta operación para demostrar que es un adulto:","audio":"gl/Parental.*"},"dibujar":"Debuxar","inicio":"Inicio","david":"Programación.\nFacendo que se\nmovan as cosas.","carlos":"Guión orixinal\ne ilustracións","irene":"Adaptación guión,\ntraducións e voces","musica":"Ally Calvine - Ukelele Fun"},},'en':{translation:{"LevelRojo":{"presentacion":"Hello! I am the colour Red.","frase":"You can find me in food such as...\ndelicious strawberries! Om nom nom!","audio":"en/Rojo.*"},"LevelNaranja":{"presentacion":"Well, my name is Orange.","frase":"I am so famous\nthat even a fruit has my name.","audio":"en/Naranja.*"},"LevelAmarillo":{"presentacion":"Here I am!\nThe colour Yellow!","frase":"Look how I go out\nof the rays of the sun.","audio":"en/Amarillo.*"},"LevelGreen":{"presentacion":"I am the colour Green.","frase":"I am in the grass and the leaves.\nNature is my thing!","audio":"en/Verde.*"},"LevelAzul":{"presentacion":"Everybody calls me Blue.","frase":"And I cover the whoooole sky!","audio":"en/Azul.*"},"LevelAnil":{"presentacion":"Allow me to introduce myself:\nMy name is Indigo.","frase":"You can find me dancing with the fish\nbetween the waves of the sea!","audio":"en/Anil.*"},"LevelVioleta":{"presentacion":"People knows me as Violet.","frase":"And I am so delicate that I\nlend my name to these beautiful flowers.","audio":"en/Violeta.*"},"LevelTodos":{"amigos":"We are really good friends and that is why\nyou can find us mixed or in groups!","pregunta":"But...\nDo you know where you can\nfind us all together?","audio":"en/Donde.*"},"LevelRespuesta":{"correcto":"That's right!\nIn the Rainbow!","audio":"en/Arco Iris.*"},"LevelSettings":{"titulo":"Settings","idioma":"Language","sonido":"Sound","narracion":"Narration","musica":"Music","aceptar":"Confirm","cancelar":"Cancel"},"Home":{"titulo":"Colours!","subtitulo":"An interactive book for kids","prefrencias":"Settings","info":"About this book","comenzar":"Start to read..."},"Juego":{"titulo":"Are you inspired? Draw with us.","compartir":" And share it!"},"ParentalGate":{"titulo":"Ops!\nThis is for grown-ups.","subtitulo":"To continue, please prove you are an adult\nby selecting the correct answer:","audio":"en/Parental.*"},"dibujar":"Sketch","inicio":"Home","david":"Programming.\nMaking the things\nmove.","carlos":"Original script\nand illustrations","irene":"Adapted script,\ntranslations\nand voice-over","musica":"Ally Calvine - Ukelele Fun"}},};});

// lib/plugins/settings.js
ig.baked=true;ig.module('plugins.settings').defines(function(){"use strict";var Settings=ig.Class.extend({narration:true,music:true,language:'es',uuid:undefined,init:function(){this.narration=localStorage.getItem('narration')?JSON.parse(localStorage.getItem('narration')):true;this.music=localStorage.getItem('music')?JSON.parse(localStorage.getItem('music')):true;this.language=localStorage.getItem('language')||'es';this.uuid=localStorage.getItem('uuid')||this._guid();},save:function(){localStorage.setItem('narration',this.narration);localStorage.setItem('music',this.music);localStorage.setItem('language',this.language);localStorage.setItem('uuid',this.uuid);},_guid:function(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}
return function(){return s4()+s4()+'-'+s4()+'-'+s4()+'-'+
s4()+'-'+s4()+s4()+s4();}();}});ig.settings=new Settings();ig.settings.save();});

// lib/plugins/whiteboard.js
ig.baked=true;ig.module('plugins.whiteboard').defines(function(){"use strict";window.WhiteBoard=ig.Class.extend({paint:false,drawingAreaX:0,drawingAreaY:0,drawingAreaWidth:0,drawingAreaHeight:0,curSize:"large",curColor:"#000000",scale:1,pos:null,init:function(drawingAreaX,drawingAreaY,drawingAreaWidth,drawingAreaHeight){this.drawingAreaX=drawingAreaX;this.drawingAreaY=drawingAreaY;this.drawingAreaWidth=drawingAreaWidth;this.drawingAreaHeight=drawingAreaHeight;this.clearCanvas();ig.system.canvas.addEventListener("pointerdown",this._press.bind(this),false);ig.system.canvas.addEventListener("pointermove",this._drag.bind(this),false);ig.system.canvas.addEventListener("pointerup",this._release.bind(this));ig.system.canvas.addEventListener("pointerout",this._cancel.bind(this),false);ig.system.canvas.addEventListener("touchstart",this._press.bind(this),false);ig.system.canvas.addEventListener("touchmove",this._drag.bind(this),false);ig.system.canvas.addEventListener("touchend",this._release.bind(this),false);ig.system.canvas.addEventListener("touchcancel",this._cancel.bind(this),false);},clearCanvas:function(){ig.system.context.clearRect(this.drawingAreaX,this.drawingAreaY,this.drawingAreaWidth,this.drawingAreaHeight);},_press:function(e){this.paint=true;this.lastX=this._mouseX(e);this.lastY=this._mouseY(e);this._paintPoint(this._mouseX(e)-1,this._mouseY(e),this._mouseX(e),this._mouseY(e),this.curSize,this.curColor);},_drag:function(e){if(this.paint){this._paintPoint(this.lastX,this.lastY,this._mouseX(e),this._mouseY(e),this.curSize,this.curColor);this.lastX=this._mouseX(e);this.lastY=this._mouseY(e);}},_release:function(){this.paint=false;},_cancel:function(){this.paint=false;},_paintPoint:function(sourceX,sourceY,targetX,targetY,size,color){var radius;switch(size){case"small":radius=2;break;case"normal":radius=5;break;case"large":radius=10;break;case"huge":radius=20;break;default:break;}
ig.system.context.beginPath();ig.system.context.moveTo(sourceX,sourceY);ig.system.context.lineTo(targetX,targetY);ig.system.context.strokeStyle=color;ig.system.context.lineCap="round";ig.system.context.lineJoin="round";ig.system.context.lineWidth=radius;ig.system.context.stroke();},_mouseX:function(event){this._calculatePixels();var ev=event.touches?event.touches[0]:event;return(ev.clientX-this.pos.left)/this.scale;},_mouseY:function(event){this._calculatePixels();var ev=event.touches?event.touches[0]:event;return(ev.clientY-this.pos.top)/this.scale;},_calculatePixels:function(){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;this.scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){this.pos=ig.system.canvas.getBoundingClientRect();}},});});

// lib/plugins/parental.js
ig.baked=true;ig.module('plugins.parental').requires('impact.game','plugins.i18n','plugins.touch-button').defines(function(){ParentalGate=ig.Class.extend({image:new ig.Image('media/fondo_parental_gate.jpg'),action:null,savedData:null,question:'',init:function(){this.savedData=new Image();this.buttons=new ig.TouchButtonCollection([new ig.TouchButton('wrong',{left:150,top:393},120,120),new ig.TouchButton('wrong',{left:300,top:393},120,120),new ig.TouchButton('wrong',{left:450,top:393},120,120),new ig.TouchButton('wrong',{left:600,top:393},120,120),new ig.TouchButton('wrong',{left:750,top:393},120,120),]);this.buttons.align();},update:function(){if(this.action){if(ig.input.pressed('ok')){this.toExecute=this.action;}
if(ig.input.pressed('wrong')||ig.input.pressed('ok')){ig.system.context.drawImage(this.savedData,0,0);this.action=null;}}else if(this.toExecute){this.toExecute();this.toExecute=null;}},draw:function(){if(this.action){this.image.draw(0,0);ig.system.context.fillStyle="#000000";ig.system.context.textAlign='center';ig.system.context.font='24pt Garamond-Bold';this.print(i18n.t("ParentalGate.titulo"),512,100,30);ig.system.context.font='19pt Garamond-Bold';this.print(i18n.t("ParentalGate.subtitulo"),512,180,30);ig.system.context.font='30pt Garamond-Bold';this.print(this.question,512,310);ig.system.context.fillStyle="#FFFFFF";var i=0;this.buttons.buttons.forEach(function(button){if(button.action==='ok'){ig.system.context.fillText(this.right_result,button.anchor.left+60,button.anchor.top+70);}else{ig.system.context.fillText(this.random_results[i],button.anchor.left+60,button.anchor.top+70);i++;}}.bind(this))
this.buttons.draw();}},askPermissionFor:function(action){if(!this.action){this.action=action;this.savedData.src=ig.system.canvas.toDataURL("image/png");var right_answer=Math.floor(Math.random()*5);for(var i=0;i<this.buttons.buttons.length;i++){this.buttons.buttons[i].action=(i===right_answer?'ok':'wrong');};this.generateQuestion();var warning=new ig.Sound('media/'+i18n.t('ParentalGate.audio'));warning.play();}},isAskingForPermission:function(){return this.action!==null;},print:function(sentences,posX,posY,increment){sentences.split('\n').forEach(function(sentence){ig.system.context.fillText(sentence,posX,posY);posY+=increment;});},generateQuestion:function(){var first_number=Math.floor((Math.random()*7)+2);var second_number=Math.floor((Math.random()*7)+2);this.right_result=first_number*second_number;this.random_results=[];this.random_results[0]=Math.min(99,this.right_result*5);this.random_results[1]=Math.min(88,this.right_result*2);this.random_results[2]=Math.min(85,this.right_result*3);this.random_results[3]=Math.min(92,this.right_result*4);this.question=first_number+'   x   '+second_number;}});});

// lib/plugins/game_history.js
ig.baked=true;ig.module('plugins.game_history').requires('impact.system').defines(function(){ig.System.inject({setGame:function(gameClass){this.referrerGameClass=this.actualGameClass;this.actualGameClass=gameClass;this.parent(gameClass);},setGameNow:function(gameClass){this.parent(gameClass);ig.game.referrer=this.referrerGameClass;},});});

// lib/plugins/impact-splash-loader.js
ig.baked=true;ig.module('plugins.impact-splash-loader').requires('impact.loader').defines(function(){ig.ImpactSplashLoader=ig.Loader.extend({endTime:0,fadeToWhiteTime:200,fadeToGameTime:800,logoWidth:341,logoHeight:77,end:function(){this.parent();this.endTime=Date.now();ig.system.setDelegate(this);},run:function(){var t=Date.now()-this.endTime;var alpha=1;if(t<this.fadeToWhiteTime){this.draw();alpha=t.map(0,this.fadeToWhiteTime,0,1);}
else if(t<this.fadeToGameTime){ig.game.run();alpha=t.map(this.fadeToWhiteTime,this.fadeToGameTime,1,0);}
else{ig.system.setDelegate(ig.game);return;}
ig.system.context.fillStyle='rgba(255,255,255,'+alpha+')';ig.system.context.fillRect(0,0,ig.system.realWidth,ig.system.realHeight);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var ctx=ig.system.context;var w=ig.system.realWidth;var h=ig.system.realHeight;var scale=1.5;var center=(w-this.logoWidth*scale)/2;ctx.fillStyle='rgba(0,0,0,0.8)';ctx.fillRect(0,0,w,h);ctx.fillStyle='rgb(128,128,128)';ctx.textAlign='right';ctx.font='10px ArialMT';ctx.fillText('Supporting your dreams - http://xuaps.com',w-10,h-10);ctx.textAlign='left';ctx.save();ctx.translate(center,h/2.5);ctx.scale(scale,scale);ctx.lineWidth='3';ctx.strokeStyle='rgb(255,255,255)';ctx.strokeRect(25,this.logoHeight+40,300,20);ctx.fillStyle='rgb(255,255,255)';ctx.fillRect(30,this.logoHeight+45,290*this._drawStatus,10);this.drawLogo(ctx);ctx.restore();},drawLogo:function draw(ctx){ctx.save();ctx.save();ctx.save();ctx.beginPath();ctx.moveTo(39.6,28.0);ctx.lineTo(16.2,4.6);ctx.bezierCurveTo(14.6,5.6,13.1,6.6,11.7,7.7);ctx.bezierCurveTo(4.2,13.9,-0.5,23.1,0.0,33.4);ctx.bezierCurveTo(0.5,42.2,3.4,49.9,6.8,56.0);ctx.bezierCurveTo(8.6,59.2,10.5,62.0,12.1,64.4);ctx.lineTo(39.6,37.0);ctx.bezierCurveTo(42.5,34.1,42.4,30.9,39.6,28.0);ctx.closePath();ctx.fillStyle="rgb(102, 195, 207)";ctx.fill();ctx.beginPath();ctx.moveTo(50.0,37.0);ctx.bezierCurveTo(50.0,37.0,58.7,45.6,66.8,53.7);ctx.lineTo(66.8,33.4);ctx.bezierCurveTo(66.8,27.0,65.0,21.1,61.9,16.1);ctx.lineTo(50.0,28.0);ctx.bezierCurveTo(47.1,30.9,47.2,34.1,50.0,37.0);ctx.closePath();ctx.fillStyle="rgb(216, 219, 64)";ctx.fill();ctx.beginPath();ctx.moveTo(40.3,37.7);ctx.lineTo(12.7,65.3);ctx.bezierCurveTo(15.6,69.3,17.8,71.7,17.8,71.7);ctx.lineTo(57.9,76.4);ctx.lineTo(60.6,54.5);ctx.lineTo(66.1,54.5);ctx.lineTo(49.3,37.7);ctx.bezierCurveTo(46.4,34.8,43.2,34.8,40.3,37.7);ctx.closePath();ctx.fillStyle="rgb(84, 173, 180)";ctx.fill();ctx.beginPath();ctx.moveTo(49.3,27.3);ctx.lineTo(61.4,15.2);ctx.bezierCurveTo(59.6,12.5,57.4,10.0,54.9,7.9);ctx.bezierCurveTo(49.1,3.0,41.6,0.0,33.4,0.0);ctx.bezierCurveTo(27.6,0.0,22.0,1.5,17.2,4.1);ctx.lineTo(40.3,27.3);ctx.bezierCurveTo(43.2,30.1,46.4,30.1,49.3,27.3);ctx.closePath();ctx.fillStyle="rgb(192, 191, 52)";ctx.fill();ctx.restore();ctx.save();ctx.beginPath();ctx.moveTo(339.9,40.0);ctx.bezierCurveTo(338.3,32.8,331.5,32.2,324.8,31.5);ctx.bezierCurveTo(318.0,30.8,311.5,30.2,311.0,22.6);ctx.bezierCurveTo(310.8,20.1,311.4,18.0,312.8,16.2);ctx.bezierCurveTo(315.1,13.2,319.3,11.4,324.0,11.3);ctx.lineTo(324.3,11.3);ctx.bezierCurveTo(328.6,11.3,332.4,12.7,334.7,15.2);ctx.bezierCurveTo(335.9,16.5,336.6,18.0,337.0,19.8);ctx.bezierCurveTo(337.1,20.3,337.5,20.6,338.0,20.5);ctx.bezierCurveTo(338.5,20.5,338.8,20.0,338.7,19.5);ctx.bezierCurveTo(338.7,19.5,338.7,19.5,338.7,19.5);ctx.bezierCurveTo(338.3,17.3,337.4,15.5,336.0,14.0);ctx.bezierCurveTo(333.4,11.2,329.1,9.6,324.3,9.6);ctx.lineTo(324.0,9.6);ctx.bezierCurveTo(318.7,9.6,314.0,11.7,311.4,15.1);ctx.bezierCurveTo(309.7,17.2,309.0,19.8,309.2,22.8);ctx.bezierCurveTo(309.9,31.8,317.7,32.6,324.7,33.3);ctx.bezierCurveTo(331.2,33.9,336.9,34.5,338.1,40.4);ctx.bezierCurveTo(338.8,43.4,338.2,46.2,336.3,48.5);ctx.bezierCurveTo(333.8,51.7,329.1,53.6,324.2,53.6);ctx.bezierCurveTo(318.1,53.6,311.2,50.3,310.5,44.1);ctx.bezierCurveTo(310.5,43.6,310.0,43.2,309.6,43.3);ctx.bezierCurveTo(309.1,43.3,308.7,43.8,308.8,44.2);ctx.bezierCurveTo(309.6,51.5,317.3,55.4,324.2,55.4);ctx.bezierCurveTo(329.7,55.4,334.8,53.2,337.7,49.6);ctx.bezierCurveTo(339.9,46.9,340.6,43.6,339.9,40.0);ctx.closePath();ctx.fillStyle="rgb(255, 255, 255)";ctx.fill();ctx.beginPath();ctx.moveTo(184.7,10.1);ctx.bezierCurveTo(184.2,10.1,183.8,10.5,183.8,10.9);ctx.lineTo(183.8,37.0);ctx.bezierCurveTo(183.8,45.9,176.5,53.1,167.7,53.1);ctx.bezierCurveTo(158.8,53.1,151.5,45.9,151.5,37.0);ctx.lineTo(151.5,10.9);ctx.bezierCurveTo(151.5,10.5,151.1,10.1,150.6,10.1);ctx.bezierCurveTo(150.2,10.1,149.8,10.5,149.8,10.9);ctx.lineTo(149.8,37.0);ctx.bezierCurveTo(149.8,46.9,157.8,54.9,167.7,54.9);ctx.bezierCurveTo(177.5,54.9,185.5,46.9,185.5,37.0);ctx.lineTo(185.5,10.9);ctx.bezierCurveTo(185.5,10.5,185.1,10.1,184.7,10.1);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(276.2,10.4);ctx.lineTo(261.9,10.4);ctx.bezierCurveTo(261.4,10.4,261.0,10.8,261.0,11.2);ctx.lineTo(261.0,53.7);ctx.bezierCurveTo(261.0,54.2,261.4,54.6,261.9,54.6);ctx.bezierCurveTo(262.4,54.6,262.7,54.2,262.7,53.7);ctx.lineTo(262.7,38.0);ctx.lineTo(276.2,38.0);ctx.bezierCurveTo(283.8,38.0,290.0,31.8,290.0,24.2);ctx.bezierCurveTo(290.0,16.6,283.8,10.4,276.2,10.4);ctx.closePath();ctx.moveTo(276.2,36.2);ctx.lineTo(262.7,36.2);ctx.lineTo(262.7,12.1);ctx.lineTo(276.2,12.1);ctx.bezierCurveTo(282.9,12.1,288.3,17.5,288.3,24.2);ctx.bezierCurveTo(288.3,30.8,282.9,36.2,276.2,36.2);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(222.4,10.9);ctx.bezierCurveTo(222.2,10.6,221.9,10.4,221.6,10.4);ctx.bezierCurveTo(221.2,10.4,220.9,10.6,220.8,10.9);ctx.lineTo(201.6,53.3);ctx.bezierCurveTo(201.4,53.8,201.6,54.3,202.1,54.5);ctx.bezierCurveTo(202.5,54.7,203.0,54.5,203.2,54.1);ctx.lineTo(208.8,41.8);ctx.lineTo(234.4,41.8);ctx.lineTo(239.9,54.1);ctx.bezierCurveTo(240.1,54.4,240.4,54.6,240.7,54.6);ctx.bezierCurveTo(240.8,54.6,241.0,54.6,241.1,54.5);ctx.bezierCurveTo(241.5,54.3,241.7,53.8,241.5,53.3);ctx.lineTo(222.4,10.9);ctx.closePath();ctx.moveTo(209.5,40.1);ctx.lineTo(221.6,13.4);ctx.lineTo(233.6,40.1);ctx.lineTo(209.5,40.1);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(89.6,10.1);ctx.bezierCurveTo(89.3,9.8,88.7,9.8,88.4,10.1);ctx.bezierCurveTo(88.1,10.5,88.1,11.0,88.4,11.4);ctx.lineTo(107.1,30.0);ctx.bezierCurveTo(107.2,30.2,107.5,30.3,107.7,30.3);ctx.bezierCurveTo(107.9,30.3,108.1,30.2,108.3,30.0);ctx.bezierCurveTo(108.6,29.7,108.6,29.1,108.3,28.8);ctx.lineTo(89.6,10.1);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(114.4,34.9);ctx.bezierCurveTo(114.1,34.6,113.5,34.6,113.2,34.9);ctx.bezierCurveTo(112.8,35.3,112.8,35.8,113.2,36.1);ctx.lineTo(131.8,54.8);ctx.bezierCurveTo(132.0,55.0,132.2,55.1,132.5,55.1);ctx.bezierCurveTo(132.7,55.1,132.9,55.0,133.1,54.8);ctx.bezierCurveTo(133.4,54.5,133.4,53.9,133.1,53.6);ctx.lineTo(114.4,34.9);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(131.8,10.1);ctx.lineTo(113.2,28.8);ctx.bezierCurveTo(112.8,29.1,112.8,29.7,113.2,30.0);ctx.bezierCurveTo(113.3,30.2,113.6,30.3,113.8,30.3);ctx.bezierCurveTo(114.0,30.3,114.2,30.2,114.4,30.0);ctx.lineTo(133.1,11.4);ctx.bezierCurveTo(133.4,11.0,133.4,10.5,133.1,10.1);ctx.bezierCurveTo(132.7,9.8,132.2,9.8,131.8,10.1);ctx.closePath();ctx.fill();ctx.beginPath();ctx.moveTo(107.1,34.9);ctx.lineTo(88.4,53.6);ctx.bezierCurveTo(88.1,53.9,88.1,54.5,88.4,54.8);ctx.bezierCurveTo(88.6,55.0,88.8,55.1,89.0,55.1);ctx.bezierCurveTo(89.2,55.1,89.5,55.0,89.6,54.8);ctx.lineTo(108.3,36.1);ctx.bezierCurveTo(108.6,35.8,108.6,35.3,108.3,34.9);ctx.bezierCurveTo(108.0,34.6,107.4,34.6,107.1,34.9);ctx.closePath();ctx.fill();ctx.restore();ctx.restore();ctx.restore();}});});

// lib/plugins/utils.js
ig.baked=true;ig.module('plugins.utils').requires('impact.system').defines(function(){TextUtils=ig.Class.extend({print:function(sentence,anchor,increment){var pos=this.align(anchor,this.textSize(sentence,increment));sentence.split('\n').forEach(function(sentence){ig.system.context.fillText(sentence,pos.x,pos.y);pos.y+=increment;});},align:function(anchor,size){var pos={};var w=ig.system.width||window.innerWidth;var h=ig.system.height||window.innerHeight;if('left'in anchor){pos.x=anchor.left;}
else if('right'in anchor){pos.x=w-anchor.right-size.x;}
if('top'in anchor){pos.y=anchor.top;}
else if('bottom'in anchor){pos.y=h-anchor.bottom-size.y;}
return pos;},textSize:function(sentence,increment){var sentences=sentence.split('\n');var size=ig.system.context.measureText(sentences[0]);return{x:ig.system.context.measureText(sentences[0]).width,y:parseInt(ig.system.context.font)+(increment*sentences.length)};},});ig.utils=new TextUtils();});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('impact.debug.debug','impact.game','game.levels.rojo','game.levels.home','game.levels.naranja','game.levels.amarillo','game.levels.green','game.levels.azul','game.levels.anil','game.levels.violeta','game.levels.todos','game.levels.respuesta','game.levels.settings','game.levels.juego','game.levels.creditos','plugins.touch-button','plugins.check-touch-button','plugins.i18n','plugins.locales','plugins.settings','plugins.whiteboard','plugins.parental','plugins.game_history','plugins.impact-splash-loader','plugins.utils').defines(function(){HomeGame=ig.Game.extend({volume:0.2,bgtune:new ig.Sound('media/background.*',false),buttons:null,buttonSettingsImage:new ig.Image('media/preferencias_blanco.png'),buttonInfoImage:new ig.Image('media/informacion.png'),buttonStartImage:new ig.Image('media/flecha_derecha.png'),buttonPaintImage:new ig.Image('media/boton_dibujar_blanco.png'),init:function(){this.loadLevel(LevelHome);var music=ig.music;music.add(this.bgtune);music.volume=this.volume;if(typeof ig.system.pausedMusic==='undefined'){ig.system.pausedMusic=false;}
if(ig.settings.music&&!ig.system.pausedMusic){music.play();}
this.buttons=new ig.TouchButtonCollection([new ig.TouchButton('start',{right:45,bottom:50},40,40,this.buttonStartImage,0),new ig.TouchButton('info',{left:45,bottom:50},40,40,this.buttonInfoImage,0),new ig.TouchButton('settings',{left:45,top:50},40,40,this.buttonSettingsImage,0),new ig.TouchButton('paint',{right:45,top:50},40,40,this.buttonPaintImage,0),]);this.buttons.align();},update:function(){this.parent();if(ig.input.pressed('settings')){ig.system.setGame(SettingsGame);}else if(ig.input.pressed('start')){ig.system.setGame(StoryGame);}else if(ig.input.pressed('paint')){ig.system.setGame(PaintGame);}else if(ig.input.pressed('info')){ig.system.setGame(CreditsGame);}},draw:function(){this.parent();this.buttons.draw();ig.system.context.fillStyle="#000000";ig.system.context.textAlign='center';ig.system.context.font='30pt Garamond-Bold';ig.system.context.fillText(i18n.t("Home.titulo"),512,360-vertical_offset);ig.system.context.font='19pt Garamond-Bold';ig.system.context.fillText(i18n.t("Home.subtitulo"),512,395-vertical_offset);ig.system.context.fillStyle="#FFFFFF";ig.system.context.textAlign='left';ig.system.context.fillText(i18n.t("Home.prefrencias"),90,80);ig.utils.print(i18n.t("Home.info"),{left:90,bottom:35},0);ig.system.context.textAlign='right';ig.utils.print(i18n.t("Home.comenzar"),{left:930,bottom:35},0);ig.system.context.fillText(i18n.t("dibujar"),930,80);},loadLevel:function(data){this.parent(data);for(var i=0;i<this.backgroundMaps.length;i++){this.backgroundMaps[i].preRender=true;}
this.screen.y=vertical_offset;}});StoryGame=ig.Game.extend({buttons:null,buttonNextImage:new ig.Image('media/flecha_derecha.png'),blackButtonNextImage:new ig.Image('media/flecha_derecha_negra.png'),buttonBackImage:new ig.Image('media/flecha_izquierda.png'),whiteButtonBackImage:new ig.Image('media/flecha_izquierda_blanca.png'),buttonSettingsImage:new ig.Image('media/preferencias_negro.png'),buttonWhiteSettingsImage:new ig.Image('media/preferencias_blanco.png'),buttonRestartImage:new ig.Image('media/boton_reiniciar_negro.png'),buttonPaintSettingsImage:new ig.Image('media/boton_dibujar_negro.png'),levels:[LevelRojo,LevelNaranja,LevelAmarillo,LevelGreen,LevelAzul,LevelAnil,LevelVioleta,LevelTodos,LevelRespuesta],currentLevel:0,narration:null,init:function(){if(ig.system.storyGameLevel){this.currentLevel=ig.system.storyGameLevel;delete ig.system.storyGameLevel;}
this.loadLevel(this.levels[this.currentLevel]);this.play_narration();this.buttons=new ig.TouchButtonCollection([new ig.TouchButton('right',{right:45,bottom:50},40,40,this.buttonNextImage,0),new ig.TouchButton('left',{left:45,bottom:50},40,40,this.buttonBackImage,0),new ig.TouchButton('settings',{left:45,top:50},40,40,this.buttonSettingsImage,0),new ig.TouchButton('paint',{right:45,top:50},40,40,this.buttonPaintSettingsImage,0),]);this.buttons.align();},update:function(){this.parent();if(this.currentLevel!==this.levels.length-1&&ig.input.pressed('right')){this.currentLevel++;this.loadLevel(this.levels[this.currentLevel]);this.play_narration();}else if(this.currentLevel!==0&&ig.input.pressed('left')){this.currentLevel--;this.loadLevel(this.levels[this.currentLevel]);this.play_narration();}else if(this.currentLevel===0&&ig.input.pressed('left')){if(this.narration)
this.narration.stop();ig.system.setGame(HomeGame);}else if(ig.input.pressed('settings')){if(this.narration)
this.narration.stop();ig.system.storyGameLevel=this.currentLevel;ig.system.setGame(SettingsGame);}else if(this.currentLevel===this.levels.length-1&&ig.input.pressed('paint')){if(this.narration)
this.narration.stop();ig.system.setGame(PaintGame);}else if(this.currentLevel===this.levels.length-1&&ig.input.pressed('right')){if(this.narration)
this.narration.stop();ig.system.setGame(HomeGame);}},draw:function(){this.parent();if(this.currentLevel<this.levels.length-1){if(this.levels[this.currentLevel].name==="LevelTodos"){this.buttons.buttons[0].image=this.blackButtonNextImage;}else{this.buttons.buttons[0].image=this.buttonNextImage;}}else{this.buttons.buttons[0].image=this.buttonRestartImage;this.buttons.buttons[3].draw();}
this.buttons.buttons[0].draw();if(this.levels[this.currentLevel].name==="LevelTodos"){this.buttons.buttons[2].image=this.buttonWhiteSettingsImage;this.buttons.buttons[1].image=this.whiteButtonBackImage;this.buttons.buttons[2].draw();this.buttons.buttons[1].draw();}else{this.buttons.buttons[2].image=this.buttonSettingsImage;this.buttons.buttons[1].image=this.buttonBackImage;this.buttons.buttons[2].draw();this.buttons.buttons[1].draw();}
ig.system.context.textAlign='center';ig.system.context.font='20pt Garamond-Bold';if(this.levels[this.currentLevel].name==="LevelRespuesta"){ig.system.context.fillStyle="#000000";ig.utils.print(i18n.t(this.levels[this.currentLevel].name+".correcto"),{left:768,bottom:100},30);}else if(this.levels[this.currentLevel].name==="LevelTodos"){ig.system.context.fillStyle="#FFFFFF";ig.utils.print(i18n.t(this.levels[this.currentLevel].name+".amigos"),{left:256,top:200},30);ig.utils.print(i18n.t(this.levels[this.currentLevel].name+".pregunta"),{left:256,top:340},30);}else{ig.system.context.fillStyle="#000000";ig.utils.print(i18n.t(this.levels[this.currentLevel].name+".presentacion"),{left:256,bottom:40},30);ig.system.context.fillStyle="#FFFFFF";if(this.levels[this.currentLevel].name!=="LevelAmarillo"){ig.utils.print(i18n.t(this.levels[this.currentLevel].name+".frase"),{left:768,top:40},30);}else{ig.utils.print(i18n.t(this.levels[this.currentLevel].name+".frase"),{left:768,bottom:40},30);}}},print:function(sentences,posX,posY,increment){sentences.split('\n').forEach(function(sentence){ig.system.context.fillText(sentence,posX,posY);posY+=increment;});},play_narration:function(){if(this.narration)
this.narration.stop();if(ig.settings.narration){this.narration=new ig.Sound("media/"+i18n.t(this.levels[this.currentLevel].name+".audio"));this.narration.play();}},loadLevel:function(data){this.parent(data);this.screen.y=vertical_offset;}});PaintGame=ig.Game.extend({buttonSettingsImage:new ig.Image('media/preferencias_negro.png'),buttonTwitterImage:new ig.Image('media/twitter.png'),buttonFacebookImage:new ig.Image('media/facebook.png'),buttonRedImage:new ig.Image('media/01_boton_rojo.png'),buttonOrangeImage:new ig.Image('media/02_boton_naranja.png'),buttonYellowImage:new ig.Image('media/03_boton_amarillo.png'),buttonGreenImage:new ig.Image('media/04_boton_verde.png'),buttonBlueImage:new ig.Image('media/05_boton_azul.png'),buttonIndigoImage:new ig.Image('media/06_boton_anil.png'),buttonVioletImage:new ig.Image('media/07_boton_violeta.png'),buttonEraserImage:new ig.Image('media/08_boton_goma.png'),buttonCleanImage:new ig.Image('media/09_boton_papelera.png'),buttonRestartImage:new ig.Image('media/flecha_izquierda.png'),border:new ig.Image('media/borde.jpg'),anillas:new ig.Image('media/anillas.png'),buttons:null,whiteboard:null,clearColor:'#FFFFFF',init:function(){this.loadLevel(LevelJuego);var red=new ig.CheckTouchButton("red",{left:130,bottom:12},92,92,this.buttonRedImage,1,0,true);var orange=new ig.CheckTouchButton("orange",{left:222,bottom:12},92,92,this.buttonOrangeImage,1,0,false);var yellow=new ig.CheckTouchButton("yellow",{left:314,bottom:12},92,92,this.buttonYellowImage,1,0,false);var green=new ig.CheckTouchButton("green",{left:406,bottom:12},92,92,this.buttonGreenImage,1,0,false);var blue=new ig.CheckTouchButton("blue",{left:498,bottom:12},92,92,this.buttonBlueImage,1,0,false);var indigo=new ig.CheckTouchButton("indigo",{left:590,bottom:12},92,92,this.buttonIndigoImage,1,0,false);var violet=new ig.CheckTouchButton("violet",{left:682,bottom:12},92,92,this.buttonVioletImage,1,0,false);var eraser=new ig.CheckTouchButton("eraser",{left:774,bottom:12},92,92,this.buttonEraserImage,1,0,false);red.related_buttons=[orange,yellow,green,blue,indigo,violet,eraser];orange.related_buttons=[red,yellow,green,blue,indigo,violet,eraser];yellow.related_buttons=[red,orange,green,blue,indigo,violet,eraser];green.related_buttons=[red,orange,yellow,blue,indigo,violet,eraser];blue.related_buttons=[red,orange,yellow,green,indigo,violet,eraser];indigo.related_buttons=[red,orange,yellow,green,blue,violet,eraser];violet.related_buttons=[red,orange,yellow,green,blue,indigo,eraser];eraser.related_buttons=[red,orange,yellow,green,blue,indigo,violet];this.buttons=new ig.TouchButtonCollection([red,orange,yellow,green,blue,indigo,violet,eraser,new ig.TouchButton('home',{left:45,bottom:50},40,40,this.buttonRestartImage,0),new ig.TouchButton('settings',{left:45,top:30},40,40,this.buttonSettingsImage,0),new ig.TouchButton('twitter',{right:45,top:30},40,40,this.buttonTwitterImage,0),new ig.TouchButton('facebook',{right:100,top:30},40,40,this.buttonFacebookImage,0),new ig.TouchButton("clean",{left:866,bottom:12},92,92,this.buttonCleanImage,0)]);this.buttons.align();this.whiteboard=new WhiteBoard(70,90,915,560);this.whiteboard.curColor="#FF0000";},update:function(){var social;this.parent();if(this.currentLevel!==0&&ig.input.pressed('home')&&!gate.isAskingForPermission()){ig.system.setGame(HomeGame);}else if(ig.input.pressed('settings')&&!gate.isAskingForPermission()){ig.system.setGame(SettingsGame);}else if(ig.input.pressed('clean')&&!gate.isAskingForPermission()){this.clearColor='#FFFFFF';}else if(ig.input.pressed('twitter')){if(window.Ejecta){gate.askPermissionFor(function(){social=new Ejecta.Social();social.gameWidth=ig.system.realWidth;social.gameHeight=ig.system.realHeight;social.post('twitter','#colores','http://xuaps.com/products/colours/',null);});}}else if(ig.input.pressed('facebook')){if(window.Ejecta){gate.askPermissionFor(function(){social=new Ejecta.Social();social.gameWidth=ig.system.realWidth;social.gameHeight=ig.system.realHeight;social.post('facebook','#colores','http://xuaps.com/products/colours/',null);});}}else if(ig.input.pressed('red')){this.whiteboard.curColor="#FF0000";}else if(ig.input.pressed('orange')){this.whiteboard.curColor="#FF4719";}else if(ig.input.pressed('yellow')){this.whiteboard.curColor="#FFFF00";}else if(ig.input.pressed('green')){this.whiteboard.curColor="#009900";}else if(ig.input.pressed('blue')){this.whiteboard.curColor="#33CCFF";}else if(ig.input.pressed('indigo')){this.whiteboard.curColor="#0033CC";}else if(ig.input.pressed('violet')){this.whiteboard.curColor="#6600CC";}else if(ig.input.pressed('eraser')){this.whiteboard.curColor="#FFFFFF";}
gate.update();},draw:function(){this.parent();this.anillas.draw(0,0,0,0,1024,157);this.border.draw(0,ig.system.realHeight-107,0,0,1024,107);this.buttons.buttons[0].draw();this.buttons.buttons[1].draw();this.buttons.buttons[2].draw();this.buttons.buttons[3].draw();this.buttons.buttons[4].draw();this.buttons.buttons[5].draw();this.buttons.buttons[6].draw();this.buttons.buttons[7].draw();this.buttons.buttons[8].draw();this.buttons.buttons[9].draw();this.buttons.buttons[12].draw();if(this.clearColor!==''){this.clearColor='';}
ig.system.context.fillStyle="#000000";ig.system.context.textAlign='left';ig.system.context.font='19pt Garamond-Bold';ig.system.context.fillText(i18n.t("Juego.titulo"),90,60);ig.system.context.textAlign='right';if(window.Ejecta){var social=new Ejecta.Social();if(social.isSupported){this.buttons.buttons[10].draw();this.buttons.buttons[11].draw();ig.system.context.fillText(i18n.t("Juego.compartir"),860,60);}}
gate.draw();}});SettingsGame=ig.Game.extend({buttonCheckImage:new ig.Image('media/check.png'),buttonOkImage:new ig.Image('media/flecha_izquierda_blanca.png'),buttonCancelImage:new ig.Image('media/cancelar.png'),buttons:null,init:function(){this.loadLevel(LevelSettings);var gl=new ig.CheckTouchButton(i18n.languages.galician,{left:150,top:255},40,40,this.buttonCheckImage,0,1,i18n.languages.galician===ig.settings.language);var es=new ig.CheckTouchButton(i18n.languages.spanish,{left:150,top:335},40,40,this.buttonCheckImage,0,1,i18n.languages.spanish===ig.settings.language);var en=new ig.CheckTouchButton(i18n.languages.english,{left:150,top:405},40,40,this.buttonCheckImage,0,1,i18n.languages.english===ig.settings.language);gl.related_buttons=[es,en];es.related_buttons=[en,gl];en.related_buttons=[gl,es];this.buttons=new ig.TouchButtonCollection([gl,es,en,new ig.CheckTouchButton('narracion',{left:670,top:255},40,40,this.buttonCheckImage,0,1,ig.settings.narration),new ig.CheckTouchButton('musica',{left:670,top:335},40,40,this.buttonCheckImage,0,1,ig.settings.music),new ig.TouchButton('aceptar',{left:45,top:50},40,40,this.buttonOkImage,0)]);this.buttons.align();},update:function(){this.parent();if(ig.input.pressed('aceptar')){ig.settings.save();ig.system.setGame(this.referrer);}else if(ig.input.pressed('musica')){ig.settings.music=!ig.settings.music;if(ig.settings.music){ig.music.play();}else{ig.music.stop();}}else if(ig.input.pressed('narracion')){ig.settings.narration=!ig.settings.narration;}else if(ig.input.pressed(i18n.languages.galician)){ig.settings.language=i18n.languages.galician;i18n.setLng(ig.settings.language);}else if(ig.input.pressed(i18n.languages.spanish)){ig.settings.language=i18n.languages.spanish;i18n.setLng(ig.settings.language);}else if(ig.input.pressed(i18n.languages.english)){ig.settings.language=i18n.languages.english;i18n.setLng(ig.settings.language);}},draw:function(){this.parent();this.buttons.draw();ig.system.context.fillStyle="#FFFFFF";ig.system.context.textAlign='center';ig.system.context.font='30pt Garamond-Bold';ig.system.context.fillText(i18n.t("LevelSettings.titulo"),512,75);ig.system.context.font='24pt Garamond-Bold';ig.system.context.fillText(i18n.t("LevelSettings.idioma"),256,185);ig.system.context.fillText(i18n.t("LevelSettings.sonido"),768,185);ig.system.context.textAlign='left';ig.system.context.fillText(i18n.t("Galego"),207,285);ig.system.context.fillText(i18n.t("Español"),207,365);ig.system.context.fillText(i18n.t("English"),207,435);ig.system.context.fillText(i18n.t("LevelSettings.narracion"),725,285);ig.system.context.fillText(i18n.t("LevelSettings.musica"),725,365);ig.system.context.font='19pt Garamond-Bold';}});CreditsGame=ig.Game.extend({buttonOkImage:new ig.Image('media/flecha_izquierda_blanca.png'),buttonWWWImage:new ig.Image('media/www.png'),buttonMailImage:new ig.Image('media/mail.png'),buttonTwitterImage:new ig.Image('media/twitter_blanco.png'),buttonMusicaImage:new ig.Image('media/musica.png'),init:function(){this.loadLevel(LevelCreditos);this.buttons=new ig.TouchButtonCollection([new ig.TouchButton('aceptar',{left:45,top:50},40,40,this.buttonOkImage,0),new ig.TouchButton('www_david',{left:100,top:230},40,40,this.buttonWWWImage,0),new ig.TouchButton('mail_david',{left:145,top:230},40,40,this.buttonMailImage,0),new ig.TouchButton('twitter_david',{left:190,top:230},40,40,this.buttonTwitterImage,0),new ig.TouchButton('www_carlos',{left:380,top:230},40,40,this.buttonWWWImage,0),new ig.TouchButton('mail_carlos',{left:425,top:230},40,40,this.buttonMailImage,0),new ig.TouchButton('twitter_carlos',{left:470,top:230},40,40,this.buttonTwitterImage,0),new ig.TouchButton('www_irene',{left:748,top:230},40,40,this.buttonWWWImage,0),new ig.TouchButton('mail_irene',{left:793,top:230},40,40,this.buttonMailImage,0),new ig.TouchButton('www_musica',{left:100,top:470},40,40,this.buttonMusicaImage,0),]);this.buttons.align();},update:function(){this.parent();if(!gate.isAskingForPermission()){if(ig.input.pressed('aceptar')){ig.system.setGame(HomeGame);}else if(ig.input.pressed('www_musica')){gate.askPermissionFor(function(){this.openUrl('http://www.jamendo.com/es/track/1128590/ally-calvine-ukulele-fun');}.bind(this));}else if(ig.input.pressed('www_david')){gate.askPermissionFor(function(){this.openUrl('http://www.xuaps.com');}.bind(this));}else if(ig.input.pressed('mail_david')){gate.askPermissionFor(function(){this.openUrl('mailto:tales@xuaps.com');}.bind(this));}else if(ig.input.pressed('twitter_david')){gate.askPermissionFor(function(){this.openUrl('http://twitter.com/xuapslabs');}.bind(this));}else if(ig.input.pressed('www_carlos')){gate.askPermissionFor(function(){this.openUrl('http://comendador.es/ilustracion');}.bind(this));}else if(ig.input.pressed('mail_carlos')){gate.askPermissionFor(function(){this.openUrl('mailto:carlos@comendador.es');}.bind(this));}else if(ig.input.pressed('twitter_carlos')){gate.askPermissionFor(function(){this.openUrl('https://twitter.com/ccomendador');}.bind(this));}else if(ig.input.pressed('www_irene')){gate.askPermissionFor(function(){this.openUrl('http://www.entrelinguas.eu');}.bind(this));}else if(ig.input.pressed('mail_irene')){gate.askPermissionFor(function(){this.openUrl('mailto:irene@entrelinguas.eu');}.bind(this));}}
gate.update();},draw:function(){this.parent();this.buttons.draw();ig.system.context.fillStyle="#FFFFFF";ig.system.context.textAlign='center';ig.system.context.font='30pt Garamond-Bold';ig.system.context.fillText(i18n.t("Home.info"),512,75);ig.system.context.font='24pt Garamond-Bold';ig.system.context.textAlign='left';ig.system.context.fillText("David Vílchez",100,185);ig.system.context.fillText("Carlos Comendador",380,185);ig.system.context.fillText("Irene Doval",748,185);ig.system.context.font='19pt Garamond-Bold';this.print(i18n.t("david"),100,305,30);this.print(i18n.t("carlos"),380,305,30);this.print(i18n.t("irene"),748,305,30);this.print(i18n.t("musica"),145,500,30);gate.draw();},print:function(sentences,posX,posY,increment){sentences.split('\n').forEach(function(sentence){ig.system.context.fillText(sentence,posX,posY);posY+=increment;});},openUrl:function(url){if(window.ejecta){ejecta.openURL(url);}else{window.location.href=url;}}});var gate;var originalWidth=1024;var originalHeight=768;var scale=window.innerWidth/originalWidth;var vertical_offset=0;i18n.init({resStore:ig.locales,lng:ig.settings.language},function(){ig.Sound.use=[ig.Sound.FORMAT.CAF,ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];var canvas=ig.$('#canvas');var height=Math.min(window.innerHeight,(window.innerWidth*originalHeight)/originalWidth);canvas.style.width=window.innerWidth+"px";canvas.style.height=height+"px";window.addEventListener('resize',function(){if(!ig.system){return;}
var height=Math.min(window.innerHeight,(window.innerWidth*originalHeight)/originalWidth);canvas.style.width=window.innerWidth+"px";canvas.style.height=height+"px";ig.system.resize(originalWidth,height/scale);});ig.main('#canvas',HomeGame,60,originalWidth,height/scale,1,ig.ImpactSplashLoader);gate=new ParentalGate();});});